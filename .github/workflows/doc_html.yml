name: 'Documentation HTML'
on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:

  BTD:
    name: 'ðŸ““ Docs'
    runs-on: ubuntu-latest
    steps:

    - name: 'ðŸ§° Checkout'
      uses: actions/checkout@v2

    - name: 'ðŸ““ Install TerosHDL and VUnit'
      run: |
        sudo pip3 install vunit_hdl
        git clone https://github.com/TerosTechnology/colibri.git
        cd colibri
        sudo npm install -g .

    - name: 'Generate documentation HTML'
      run: |
        python3 generate_doc.py html

    - name: 'ðŸ“¤ Upload artifact: HTML'
      uses: actions/upload-artifact@master
      with:
        name: documentation-html
        path: |
          teroshdl_doc

    - name: Deploy ðŸš€
      uses: JamesIves/github-pages-deploy-action@4.1.4
      with:
        branch: gh-pages 
        folder: teroshdl_doc 
