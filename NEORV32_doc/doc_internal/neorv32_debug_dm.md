# Entity: neorv32_debug_dm
## Diagram
![Diagram](neorv32_debug_dm.svg "Diagram")
## Ports
| Port name        | Direction | Type                           | Description |
| ---------------- | --------- | ------------------------------ | ----------- |
| clk_i            | in        | std_ulogic                     |             |
| rstn_i           | in        | std_ulogic                     |             |
| dmi_rstn_i       | in        | std_ulogic                     |             |
| dmi_req_valid_i  | in        | std_ulogic                     |             |
| dmi_req_ready_o  | out       | std_ulogic                     |             |
| dmi_req_addr_i   | in        | std_ulogic_vector(06 downto 0) |             |
| dmi_req_op_i     | in        | std_ulogic                     |             |
| dmi_req_data_i   | in        | std_ulogic_vector(31 downto 0) |             |
| dmi_resp_valid_o | out       | std_ulogic                     |             |
| dmi_resp_ready_i | in        | std_ulogic                     |             |
| dmi_resp_data_o  | out       | std_ulogic_vector(31 downto 0) |             |
| dmi_resp_err_o   | out       | std_ulogic                     |             |
| cpu_addr_i       | in        | std_ulogic_vector(31 downto 0) |             |
| cpu_rden_i       | in        | std_ulogic                     |             |
| cpu_wren_i       | in        | std_ulogic                     |             |
| cpu_data_i       | in        | std_ulogic_vector(31 downto 0) |             |
| cpu_data_o       | out       | std_ulogic_vector(31 downto 0) |             |
| cpu_ack_o        | out       | std_ulogic                     |             |
| cpu_ndmrstn_o    | out       | std_ulogic                     |             |
| cpu_halt_req_o   | out       | std_ulogic                     |             |
## Signals
| Name        | Type                           | Description |
| ----------- | ------------------------------ | ----------- |
| dm_ctrl     | dm_ctrl_t                      |             |
| dm_reg      | dm_reg_t                       |             |
| cpu_progbuf | cpu_progbuf_t                  |             |
| dci         | dci_t                          |             |
| acc_en      | std_ulogic                     |             |
| rden        | std_ulogic                     |             |
| wren        | std_ulogic                     |             |
| maddr       | std_ulogic_vector(01 downto 0) |             |
| data_buf    | std_ulogic_vector(31 downto 0) |             |
| prog_buf    | prog_buf_t                     |             |
## Constants
| Name                 | Type                           | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Description |
| -------------------- | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| nscratch_c           | std_ulogic_vector(03 downto 0) |  "0001"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |             |
| dataaccess_c         | std_ulogic                     |  '1'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |             |
| datasize_c           | std_ulogic_vector(03 downto 0) |  "0001"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |             |
| dataaddr_c           | std_ulogic_vector(11 downto 0) |  dm_data_base_c(11 downto 0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |
| addr_data0_c         | std_ulogic_vector(6 downto 0)  |  "000" & x"4"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_dmcontrol_c     | std_ulogic_vector(6 downto 0)  |  "001" & x"0"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_dmstatus_c      | std_ulogic_vector(6 downto 0)  |  "001" & x"1"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_hartinfo_c      | std_ulogic_vector(6 downto 0)  |  "001" & x"2"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_abstractcs_c    | std_ulogic_vector(6 downto 0)  |  "001" & x"6"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_command_c       | std_ulogic_vector(6 downto 0)  |  "001" & x"7"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_abstractauto_c  | std_ulogic_vector(6 downto 0)  |  "001" & x"8"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_nextdm_c        | std_ulogic_vector(6 downto 0)  |  "001" & x"d"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_progbuf0_c      | std_ulogic_vector(6 downto 0)  |  "010" & x"0"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_progbuf1_c      | std_ulogic_vector(6 downto 0)  |  "010" & x"1"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_sbcs_c          | std_ulogic_vector(6 downto 0)  |  "011" & x"8"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| addr_haltsum0_c      | std_ulogic_vector(6 downto 0)  |  "100" & x"0"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| instr_nop_c          | std_ulogic_vector(31 downto 0) |  x"00000013"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |
| instr_lw_c           | std_ulogic_vector(31 downto 0) |  x"00002003"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |
| instr_sw_c           | std_ulogic_vector(31 downto 0) |  x"00002023"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |
| instr_ebreak_c       | std_ulogic_vector(31 downto 0) |  x"00100073"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |
| hi_abb_c             | natural                        |  31                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             |
| lo_abb_c             | natural                        |  index_size_f(dm_size_c)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |             |
| sreg_halt_ack_c      | natural                        |  0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| sreg_resume_req_c    | natural                        |  1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| sreg_resume_ack_c    | natural                        |  2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| sreg_execute_req_c   | natural                        |  3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| sreg_execute_ack_c   | natural                        |  4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| sreg_exception_ack_c | natural                        |  5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |
| code_rom_file        | code_rom_file_t                |  (     00000000 => x"0180006f",     00000001 => x"7b241073",     00000002 => x"02000413",     00000003 => x"98802023",     00000004 => x"7b202473",     00000005 => x"00100073",     00000006 => x"7b241073",     00000007 => x"00100413",     00000008 => x"98802023",     00000009 => x"98002403",     00000010 => x"00847413",     00000011 => x"02041263",     00000012 => x"98002403",     00000013 => x"00247413",     00000014 => x"00041463",     00000015 => x"fe9ff06f",     00000016 => x"00400413",     00000017 => x"98802023",     00000018 => x"7b202473",     00000019 => x"7b200073",     00000020 => x"01000413",     00000021 => x"98802023",     00000022 => x"7b202473",     00000023 => x"0000100f",     00000024 => x"88000067",     others   => x"00100073"  -- ebreak   ) |             |
## Types
| Name            | Type                                                                                     | Description |
| --------------- | ---------------------------------------------------------------------------------------- | ----------- |
| dm_ctrl_state_t | (CMD_IDLE, CMD_EXE_CHECK, CMD_EXE_PREPARE, CMD_EXE_TRIGGER, CMD_EXE_BUSY, CMD_EXE_ERROR) |             |
| dm_ctrl_t       |                                                                                          |             |
| progbuf_t       |                                                                                          |             |
| dm_reg_t        |                                                                                          |             |
| cpu_progbuf_t   |                                                                                          |             |
| dci_t           |                                                                                          |             |
| code_rom_file_t |                                                                                          |             |
| prog_buf_t      |                                                                                          |             |
## Processes
- dm_controller: _( clk_i )_

- dmi_write_access: _( rstn_i, clk_i )_

- dmi_read_access: _( clk_i )_

- write_access: _( clk_i )_

- read_access: _( clk_i )_

