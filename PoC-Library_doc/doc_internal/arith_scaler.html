
<style>
  table {
    width:70%;
    margin-left: auto;
    margin-right: auto
  }
  svg {
    display:block;  
    width:60%;
    margin-left: auto;
    margin-right: auto
  }
  h1, h2, h3 {
    margin-left:1.5%;
    width:98%;
    font-weight:bold
  }
  code {
    color:#545253;
  }
  p {
    width: 98%;
    color:black;
    margin-top:5px;
    margin-bottom:5px 
  }
  * {
    color:black;
    line-height: 1.6;
  }
  li{
    margin: 20px 0;
  }
  #function_return{
    font-weight: bold;
    color:green;
  }
  #teroshdl_description, li {
    width: 95%;
    margin-left:2%;
    margin-right:2%;
  }
  #function_arguments{
    color:black;
  }
  #descriptions{
    width: 90%;
    margin-left:5.5%;
    margin-right:3%;
  }
  div.templateTerosHDL {
    background-color: white;
    position:absolute;
  }
  td, th {
    padding:2px; 
    border: 1px solid grey;
  }
  th {
    background-color: #ffd78c;
  }
  tr:hover {
    background-color: #ddd;
  }
  tr:nth-child(even){
    background-color: #f2f2f2;
  }
</style>
<div id="teroshdl" class='templateTerosHDL'>
<a id=arith_scaler><h1 id="entity-arith_scaler">Entity: arith_scaler</h1></a><h2 id="diagram">Diagram</h2><p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 935 190"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="545,0 560,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="170" height="50" fill="black" x="560" y="0"></rect><rect id="SvgjsRect1007" width="166" height="45" fill="#bdecb6" x="562" y="2"></rect><text id="SvgjsText1008" font-family="Helvetica" x="540" y="-5.698437500000001" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   T_POSVEC </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="575" y="-5.698437500000001" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   MULS </tspan></text><line id="SvgjsLine1012" x1="545" y1="15" x2="560" y2="15" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="540" y="14.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   T_POSVEC </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="575" y="14.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   DIVS </tspan></text><line id="SvgjsLine1017" x1="545" y1="35" x2="560" y2="35" stroke-linecap="rec" stroke="black" stroke-width="5"></line><rect id="SvgjsRect1018" width="170" height="130" fill="black" x="560" y="55"></rect><rect id="SvgjsRect1019" width="166" height="125" fill="#fdfd96" x="562" y="57"></rect><text id="SvgjsText1020" font-family="Helvetica" x="540" y="49.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1022" font-family="Helvetica" x="575" y="49.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1023" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   clk </tspan></text><line id="SvgjsLine1024" x1="545" y1="70" x2="560" y2="70" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1025" font-family="Helvetica" x="540" y="69.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1027" font-family="Helvetica" x="575" y="69.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1028" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   rst </tspan></text><line id="SvgjsLine1029" x1="545" y1="90" x2="560" y2="90" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1030" font-family="Helvetica" x="540" y="89.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1032" font-family="Helvetica" x="575" y="89.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1033" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   start </tspan></text><line id="SvgjsLine1034" x1="545" y1="110" x2="560" y2="110" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1035" font-family="Helvetica" x="540" y="109.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic_vector </tspan></text><text id="SvgjsText1037" font-family="Helvetica" x="575" y="109.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1038" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   arg </tspan></text><line id="SvgjsLine1039" x1="545" y1="130" x2="560" y2="130" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1040" font-family="Helvetica" x="540" y="129.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic_vector(log2ceil(MULS'length)-1 downto 0) </tspan></text><text id="SvgjsText1042" font-family="Helvetica" x="575" y="129.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1043" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   msel </tspan></text><line id="SvgjsLine1044" x1="545" y1="150" x2="560" y2="150" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1045" font-family="Helvetica" x="540" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="540" svgjs:data="{&quot;newLined&quot;:true}">   std_logic_vector(log2ceil(DIVS'length)-1 downto 0) </tspan></text><text id="SvgjsText1047" font-family="Helvetica" x="575" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1048" dy="26" x="575" svgjs:data="{&quot;newLined&quot;:true}">   dsel </tspan></text><line id="SvgjsLine1049" x1="545" y1="170" x2="560" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1050" font-family="Helvetica" x="750" y="49.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="750" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1052" font-family="Helvetica" x="715" y="49.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1053" dy="26" x="715" svgjs:data="{&quot;newLined&quot;:true}">   done </tspan></text><line id="SvgjsLine1054" x1="730" y1="70" x2="745" y2="70" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1055" font-family="Helvetica" x="750" y="69.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="750" svgjs:data="{&quot;newLined&quot;:true}">   std_logic_vector </tspan></text><text id="SvgjsText1057" font-family="Helvetica" x="715" y="69.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1058" dy="26" x="715" svgjs:data="{&quot;newLined&quot;:true}">   res </tspan></text><line id="SvgjsLine1059" x1="730" y1="90" x2="745" y2="90" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg></p><h2 id="description">Description</h2><div id="teroshdl_description"><p>EMACS settings: -<em>-    tab-width: 2; indent-tabs-mode: t -</em>- vim: tabstop=2:shiftwidth=2:noexpandtab kate: tab-width 2; replace-tabs off; indent-width 2; ============================================================================= Authors:                    Thomas B. Preusser Entity:                    A flexible scaler for fixed-point values. Description:</p><hr /><p>A flexible scaler for fixed-point values. The scaler is implemented for a set of multiplier and divider values. Each individual scaling operation can arbitrarily select one value from each these sets. The computation calculates: <code>unsigned(arg) * MULS(msel) / DIVS(dsel)</code> rounded to the nearest (tie upwards) fixed-point result of the same precision as <code>arg</code>. The computation is started by asserting <code>start</code> to high for one cycle. If a computation is running, it will be restarted. The completion of a calculation is signaled via <code>done</code>. <code>done</code> is high when no computation is in progress. The result of the last scaling operation is stable and can be read from <code>res</code>. The weight of the LSB of <code>res</code> is the same as the LSB of <code>arg</code>. Make sure to tap a sufficient number of result bits in accordance to the highest scaling ratio to be used in order to avoid a truncation overflow. License: ============================================================================= Copyright 2007-2016 Technische Universitaet Dresden - Germany Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. =============================================================================</p></div><h2 id="generics">Generics</h2>
<table>
<thead>
<tr>
<th id="generic_name">Generic name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MULS</td>
<td>T_POSVEC</td>
<td>(0 =&gt; 1)</td>
<td>The set of multipliers to choose from in scaling operations.</td>
</tr>
<tr>
<td>DIVS</td>
<td>T_POSVEC</td>
<td>(0 =&gt; 1)</td>
<td>The set of divisors to choose from in scaling operations.</td>
</tr>
</tbody>
</table>
<h2 id="ports">Ports</h2>
<table>
<thead>
<tr>
<th id="port_name">Port name</th>
<th id="direction">Direction</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>clk</td>
<td>in</td>
<td>std_logic</td>
<td></td>
</tr>
<tr>
<td>rst</td>
<td>in</td>
<td>std_logic</td>
<td></td>
</tr>
<tr>
<td>start</td>
<td>in</td>
<td>std_logic</td>
<td>Start of Computation</td>
</tr>
<tr>
<td>arg</td>
<td>in</td>
<td>std_logic_vector</td>
<td>Fixed-point value to be scaled</td>
</tr>
<tr>
<td>msel</td>
<td>in</td>
<td>std_logic_vector(log2ceil(MULS'length)-1 downto 0)</td>
<td></td>
</tr>
<tr>
<td>dsel</td>
<td>in</td>
<td>std_logic_vector(log2ceil(DIVS'length)-1 downto 0)</td>
<td></td>
</tr>
<tr>
<td>done</td>
<td>out</td>
<td>std_logic</td>
<td>Completion</td>
</tr>
<tr>
<td>res</td>
<td>out</td>
<td>std_logic_vector</td>
<td>Result</td>
</tr>
</tbody>
</table><h2 id="signals">Signals</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>muloffset</td>
<td>unsigned(X-1 downto 0)</td>
<td>Offset for correct rounding.</td>
</tr>
<tr>
<td>multiplier</td>
<td>unsigned(X     downto 0)</td>
<td>The actual multiplier value.</td>
</tr>
<tr>
<td>divisor</td>
<td>unsigned(R-1 downto 0)</td>
<td>The actual divisor value.</td>
</tr>
<tr>
<td>divcini</td>
<td>unsigned(log2ceil(MAX_ANY_STEPS)-1 downto 0)</td>
<td>Count for division steps.</td>
</tr>
<tr>
<td>divmask</td>
<td>tResMask</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="constants">Constants</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>N</td>
<td>positive</td>
<td>arg'length</td>
<td></td>
</tr>
<tr>
<td>X</td>
<td>positive</td>
<td>log2ceil(imax(imax(MULS), imax(DIVS)/2+1))</td>
<td></td>
</tr>
<tr>
<td>R</td>
<td>positive</td>
<td>log2ceil(imax(DIVS)+1)</td>
<td></td>
</tr>
<tr>
<td>DIV_PROPS</td>
<td>tDivProps</td>
<td>computeProps</td>
<td></td>
</tr>
<tr>
<td>MAX_MUL_STEPS</td>
<td>positive</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>MAX_DIV_STEPS</td>
<td>positive</td>
<td>imax(DIV_PROPS.steps)</td>
<td></td>
</tr>
<tr>
<td>MAX_ANY_STEPS</td>
<td>positive</td>
<td>imax(MAX_MUL_STEPS, MAX_DIV_STEPS)</td>
<td></td>
</tr>
<tr>
<td>RES_MASKS</td>
<td>tResMasks(DIVS'range)</td>
<td>computeMasks</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="types">Types</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tDivProps</td>
<td></td>
<td>Division Properties</td>
</tr>
<tr>
<td>tResMasks</td>
<td></td>
<td></td>
</tr>
</tbody>
</table><h2 id="functions">Functions</h2><ul>
<li>computeProps <font id="function_arguments">()</font> <font id="function_return">return tDivProps </font></li>
</ul><ul>
<li>computeMasks <font id="function_arguments">()</font> <font id="function_return">return tResMasks </font></li>
</ul><br><br><br><br><br><br>