
<style>
  table {
    width:70%;
    margin-left: auto;
    margin-right: auto
  }
  svg {
    width:68%;
    height:30%;
    display:block;  
    margin-left: auto;
    margin-right: auto
  }
  h1, h2, h3, h4 {
    margin-left:1.5%;
    width:98%;
    font-weight:bold
  }
  code {
    color:#545253;
  }
  p {
    width: 98%;
    color:black;
    margin-top:5px;
    margin-bottom:5px 
  }
  * {
    color:black;
    line-height: 1.6;
  }
  li{
    margin: 20px 0;
  }
  #function_return{
    font-weight: bold;
    color:green;
  }
  #teroshdl_description, li {
    width: 95%;
    margin-left:2%;
    margin-right:2%;
  }
  #function_arguments{
    color:black;
  }
  #descriptions{
    width: 90%;
    margin-left:5.5%;
    margin-right:3%;
  }
  div.templateTerosHDL {
    background-color: white;
    position:absolute;
  }
  td, th {
    padding:2px; 
    border: 1px solid grey;
  }
  th {
    background-color: #ffd78c;
  }
  tr:hover {
    background-color: #ddd;
  }
  tr:nth-child(even){
    background-color: #f2f2f2;
  }
</style>
<div id="teroshdl" class='templateTerosHDL'>
<a id=misc_bit_lz><h1 id="entity-misc_bit_lz">Entity: misc_bit_lz</h1></a><h2 id="diagram">Diagram</h2><p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 885 210"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="135,0 150,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="200" height="90" fill="black" x="150" y="0"></rect><rect id="SvgjsRect1007" width="196" height="85" fill="#bdecb6" x="152" y="2"></rect><text id="SvgjsText1008" font-family="Helvetica" x="130" y="-5.698437500000001" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   positive </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="165" y="-5.698437500000001" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   COUNT_BITS </tspan></text><line id="SvgjsLine1012" x1="135" y1="15" x2="150" y2="15" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="130" y="14.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   positive </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="165" y="14.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   OFFSET_BITS </tspan></text><line id="SvgjsLine1017" x1="135" y1="35" x2="150" y2="35" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1018" font-family="Helvetica" x="130" y="34.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1019" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   boolean </tspan></text><text id="SvgjsText1020" font-family="Helvetica" x="165" y="34.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   OUTPUT_REGS </tspan></text><line id="SvgjsLine1022" x1="135" y1="55" x2="150" y2="55" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1023" font-family="Helvetica" x="130" y="54.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1024" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   boolean </tspan></text><text id="SvgjsText1025" font-family="Helvetica" x="165" y="54.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   OPTIMIZE_SPEED </tspan></text><line id="SvgjsLine1027" x1="135" y1="75" x2="150" y2="75" stroke-linecap="rec" stroke="black" stroke-width="5"></line><rect id="SvgjsRect1028" width="200" height="110" fill="black" x="150" y="95"></rect><rect id="SvgjsRect1029" width="196" height="105" fill="#fdfd96" x="152" y="97"></rect><text id="SvgjsText1030" font-family="Helvetica" x="130" y="89.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1032" font-family="Helvetica" x="165" y="89.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1033" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   clk </tspan></text><line id="SvgjsLine1034" x1="135" y1="110" x2="150" y2="110" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1035" font-family="Helvetica" x="130" y="109.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1037" font-family="Helvetica" x="165" y="109.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1038" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   rst </tspan></text><line id="SvgjsLine1039" x1="135" y1="130" x2="150" y2="130" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1040" font-family="Helvetica" x="130" y="129.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1042" font-family="Helvetica" x="165" y="129.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1043" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   din </tspan></text><line id="SvgjsLine1044" x1="135" y1="150" x2="150" y2="150" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1045" font-family="Helvetica" x="130" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1047" font-family="Helvetica" x="165" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1048" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   put </tspan></text><line id="SvgjsLine1049" x1="135" y1="170" x2="150" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1050" font-family="Helvetica" x="130" y="169.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1052" font-family="Helvetica" x="165" y="169.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1053" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   flush </tspan></text><line id="SvgjsLine1054" x1="135" y1="190" x2="150" y2="190" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1055" font-family="Helvetica" x="370" y="89.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="370" svgjs:data="{&quot;newLined&quot;:true}">   std_logic_vector(COUNT_BITS+OFFSET_BITS downto 0) </tspan></text><text id="SvgjsText1057" font-family="Helvetica" x="335" y="89.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1058" dy="26" x="335" svgjs:data="{&quot;newLined&quot;:true}">   odat </tspan></text><line id="SvgjsLine1059" x1="350" y1="110" x2="365" y2="110" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1060" font-family="Helvetica" x="370" y="109.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1061" dy="26" x="370" svgjs:data="{&quot;newLined&quot;:true}">   std_logic </tspan></text><text id="SvgjsText1062" font-family="Helvetica" x="335" y="109.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1063" dy="26" x="335" svgjs:data="{&quot;newLined&quot;:true}">   ostb </tspan></text><line id="SvgjsLine1064" x1="350" y1="130" x2="365" y2="130" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg></p><h2 id="description">Description</h2><div id="teroshdl_description"><p>EMACS settings: -<em>-  tab-width: 2; indent-tabs-mode: t -</em>- vim: tabstop=2:shiftwidth=2:noexpandtab kate: tab-width 2; replace-tabs off; indent-width 2; ============================================================================= Description: An LZ77-based bit stream compressor. Output Format 1 | Literal A literal bit string of length COUNT_BITS+OFFSET_BITS. 0 | <Count:COUNT_BITS> | <Offset:OFFSET_BITS> Repetition starting at <Offset> in history buffer of length <Count>+COUNT_BITS+OFFSET_BITS where <Count> < 2^COUNT_BITS-1. Unless <Count> = 2^COUNT_BITS-2, this repetition is followed by a trailing non-matching, i.e. inverted, bit. The most recent bit just preceding the repetition is considered to be at offset zero(0). Older bits are at higher offsets accordingly. The reported length of the repetition may actually be greater than the offset. In this case, the repetition is reoccuring in itself. The reconstruction must then be performed in several steps. 0 | <1:COUNT_BITS> | <Offset:OFFSET_BITS> This marks the end of the message. The <Offset> field alters the semantics of the immediately preceding message: a)If the preceding message was a repetition, <Offset> specifies the value of the trailing bit explicitly in its rightmost bit. The implicit trailing non-matching bit is overridden. b)If the preceding message was a literal, <Offset> is a non-positive number d given in its one's complement representation. The value ~d specifies the number of bits,  which this literal repeated of the preceding output. These bits must be deleted from the reconstructed stream. Parameter Constraints COUNT_BITS &lt;= OFFSET_BITS &lt; 2**COUNT_BITS - COUNT_BITS ============================================================================= Authors:     Thomas B. Preusser <a href="m&#97;&#105;&#108;&#116;o&#58;&#x74;&#x68;&#111;&#x6d;&#97;&#115;.&#x70;&#x72;e&#x75;&#115;&#115;&#101;&#x72;&#x40;&#x75;&#116;&#101;x&#97;&#115;&#x2e;&#x65;&#100;&#x75;">&#116;&#104;&#111;&#109;&#x61;&#115;&#46;&#112;&#114;&#101;&#117;&#115;&#x73;&#101;&#114;&#64;u&#116;&#101;&#120;&#97;&#x73;&#x2e;&#101;&#100;&#x75;</a> ============================================================================= References: Original Study Kai-Uwe Irrgang <a href="&#x6d;&#x61;&#x69;l&#x74;&#111;&#x3a;&#107;&#x61;&#105;&#45;&#117;&#x77;&#x65;&#x2e;&#x69;&#114;&#114;&#x67;&#97;&#x6e;&#x67;&#x40;&#98;&#45;&#116;&#x75;&#x2e;&#x64;&#101;">&#x6b;&#x61;i&#45;&#117;&#x77;&#101;&#46;&#105;&#114;&#114;&#103;&#97;&#110;&#103;&#x40;&#x62;&#45;&#116;&#x75;&#x2e;&#100;&#101;</a> PhD Thesis: "Modellierung von On-Chip-Trace-Architekturen fuer eingebettete Systeme" Papers Kai-Uwe Irrgang and Thomas B. Preusser and Rainer G. Spallek: "An LZ77-Style Bit-Level Compression for Trace Data Compaction", International Conference on Field Programmable Logic and Applications (FPL 2015), Sep, 2015. Kai-Uwe Irrgang and Thomas B. Preusser and Rainer G. Spallek: "Kompression von Tracedaten auf der Basis eines auf Bitebene arbeitenden LZ77-Woerterbuchansatzes", Fehlertolerante und energieeffiziente eingebettete Systeme: Methoden und Anwendungen (FEES 2015), Oct, 2015. =============================================================================</p></div><h2 id="generics">Generics</h2>
<table>
<thead>
<tr>
<th id="generic_name">Generic name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>COUNT_BITS</td>
<td>positive</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OFFSET_BITS</td>
<td>positive</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OUTPUT_REGS</td>
<td>boolean</td>
<td>true</td>
<td>Register all outputs</td>
</tr>
<tr>
<td>OPTIMIZE_SPEED</td>
<td>boolean</td>
<td>true</td>
<td>Favor achievable clock over size</td>
</tr>
</tbody>
</table>
<h2 id="ports">Ports</h2>
<table>
<thead>
<tr>
<th id="port_name">Port name</th>
<th id="direction">Direction</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>clk</td>
<td>in</td>
<td>std_logic</td>
<td>Global Control</td>
</tr>
<tr>
<td>rst</td>
<td>in</td>
<td>std_logic</td>
<td></td>
</tr>
<tr>
<td>din</td>
<td>in</td>
<td>std_logic</td>
<td>Data Input</td>
</tr>
<tr>
<td>put</td>
<td>in</td>
<td>std_logic</td>
<td></td>
</tr>
<tr>
<td>flush</td>
<td>in</td>
<td>std_logic</td>
<td>end of message,</td>
</tr>
<tr>
<td>odat</td>
<td>out</td>
<td>std_logic_vector(COUNT_BITS+OFFSET_BITS downto 0)</td>
<td>to be asserted after last associated putData Output</td>
</tr>
<tr>
<td>ostb</td>
<td>out</td>
<td>std_logic</td>
<td></td>
</tr>
</tbody>
</table><h2 id="signals">Signals</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>History</td>
<td>std_logic_vector(HISTORY_SIZE   downto 0)</td>
<td>History and Match Buffers</td>
</tr>
<tr>
<td>Match</td>
<td>std_logic_vector(HISTORY_SIZE-1 downto 0)</td>
<td></td>
</tr>
<tr>
<td>Count</td>
<td>signed(COUNT_BITS downto 0)</td>
<td></td>
</tr>
<tr>
<td>Offset</td>
<td>unsigned(OFFSET_BITS-1 downto 0)</td>
<td></td>
</tr>
<tr>
<td>Term</td>
<td>std_logic</td>
<td></td>
</tr>
<tr>
<td>Offset_nxt</td>
<td>unsigned(Offset'range)</td>
<td></td>
</tr>
<tr>
<td>ov</td>
<td>X01</td>
<td>Counter Overflow</td>
</tr>
<tr>
<td>valid</td>
<td>X01</td>
<td>Still some Match available</td>
</tr>
<tr>
<td>data</td>
<td>std_logic_vector(odat'range)</td>
<td>Outputs</td>
</tr>
<tr>
<td>push</td>
<td>std_logic</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="constants">Constants</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>HISTORY_SIZE</td>
<td>positive</td>
<td>2**OFFSET_BITS</td>
<td></td>
</tr>
<tr>
<td>LITERAL_LEN</td>
<td>positive</td>
<td>COUNT_BITS + OFFSET_BITS</td>
<td></td>
</tr>
</tbody>
</table><h2 id="processes">Processes</h2><ul>
<li>unnamed: ( clk )</li>
</ul><div id="descriptions"><p><strong>Description</strong><br />
Registers</p></div><br><br><br><br><br><br>