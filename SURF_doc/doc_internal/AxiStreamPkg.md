# Package: AxiStreamPkg

- **File**: AxiStreamPkg.vhd
## Description

 use surf.TextUtilPkg.all;

## Constants

| Name                         | Type                | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Description     |
| ---------------------------- | ------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------- |
| AXI_STREAM_MAX_TDATA_WIDTH_C | positive            |  512                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |  Units of bits  |
| AXI_STREAM_MAX_TKEEP_WIDTH_C | positive            |  (AXI_STREAM_MAX_TDATA_WIDTH_C/8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |  Units of bytes |
| AXI_STREAM_MASTER_INIT_C     | AxiStreamMasterType |  (       tValid => '0',<br><span style="padding-left:20px">       tData  => (others => '0'),<br><span style="padding-left:20px">       tStrb  => (others => '1'),<br><span style="padding-left:20px">       tKeep  => (others => '1'),<br><span style="padding-left:20px">       tLast  => '0',<br><span style="padding-left:20px">       tDest  => (others => '0'),<br><span style="padding-left:20px">       tId    => (others => '0'),<br><span style="padding-left:20px">       tUser  => (others => '0'))                                              |                 |
| AXI_STREAM_SLAVE_INIT_C      | AxiStreamSlaveType  |  (       tReady => '0')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                 |
| AXI_STREAM_SLAVE_FORCE_C     | AxiStreamSlaveType  |  (       tReady => '1')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                 |
| AXI_STREAM_CONFIG_INIT_C     | AxiStreamConfigType |  (       -- TDEST_INTERLEAVE_C => true,<br><span style="padding-left:20px">       TSTRB_EN_C         => false,<br><span style="padding-left:20px">       TDATA_BYTES_C      => 16,<br><span style="padding-left:20px">       TDEST_BITS_C       => 4,<br><span style="padding-left:20px">       TID_BITS_C         => 0,<br><span style="padding-left:20px">       TKEEP_MODE_C       => TKEEP_NORMAL_C,<br><span style="padding-left:20px">       TUSER_BITS_C       => 4,<br><span style="padding-left:20px">       TUSER_MODE_C       => TUSER_NORMAL_C) |                 |
| AXI_STREAM_CTRL_INIT_C       | AxiStreamCtrlType   |  (       pause    => '1',<br><span style="padding-left:20px">       overflow => '0',<br><span style="padding-left:20px">       idle     => '0')                                                                                                                                                                                                                                                                                                                                                                                                             |                 |
| AXI_STREAM_CTRL_UNUSED_C     | AxiStreamCtrlType   |  (       pause    => '0',<br><span style="padding-left:20px">       overflow => '0',<br><span style="padding-left:20px">       idle     => '1')                                                                                                                                                                                                                                                                                                                                                                                                             |                 |
## Types

| Name                       | Type                                                                                                                                                                          | Description                                                                                                                                                                                                                                                        |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| AxiStreamMasterType        |                                                                                                                                                                               |                                                                                                                                                                                                                                                                    |
| AxiStreamMasterArray       | array (natural range<>) of AxiStreamMasterType                                                                                                                                |                                                                                                                                                                                                                                                                    |
| AxiStreamMasterVectorArray | array (natural range<>,<br><span style="padding-left:20px"> natural range<>) of AxiStreamMasterType                                                                           |                                                                                                                                                                                                                                                                    |
| AxiStreamDualMasterArray   | array (natural range <>) of AxiStreamMasterArray(1 downto 0)                                                                                                                  |                                                                                                                                                                                                                                                                    |
| AxiStreamQuadMasterArray   | array (natural range <>) of AxiStreamMasterArray(3 downto 0)                                                                                                                  |                                                                                                                                                                                                                                                                    |
| AxiStreamOctalMasterArray  | array (natural range <>) of AxiStreamMasterArray(7 downto 0)                                                                                                                  |                                                                                                                                                                                                                                                                    |
| AxiStreamSlaveType         |                                                                                                                                                                               |                                                                                                                                                                                                                                                                    |
| AxiStreamSlaveArray        | array (natural range<>) of AxiStreamSlaveType                                                                                                                                 |                                                                                                                                                                                                                                                                    |
| AxiStreamSlaveVectorArray  | array (natural range<>,<br><span style="padding-left:20px"> natural range<>) of AxiStreamSlaveType                                                                            |                                                                                                                                                                                                                                                                    |
| AxiStreamDualSlaveArray    | array (natural range <>) of AxiStreamSlaveArray(1 downto 0)                                                                                                                   |                                                                                                                                                                                                                                                                    |
| AxiStreamQuadSlaveArray    | array (natural range <>) of AxiStreamSlaveArray(3 downto 0)                                                                                                                   |                                                                                                                                                                                                                                                                    |
| AxiStreamOctalSlaveArray   | array (natural range <>) of AxiStreamSlaveArray(7 downto 0)                                                                                                                   |                                                                                                                                                                                                                                                                    |
| TUserModeType              | (TUSER_NORMAL_C,<br><span style="padding-left:20px"> TUSER_FIRST_LAST_C,<br><span style="padding-left:20px"> TUSER_LAST_C,<br><span style="padding-left:20px"> TUSER_NONE_C)  |                                                                                                                                                                                                                                                                    |
| TKeepModeType              | (TKEEP_NORMAL_C,<br><span style="padding-left:20px"> TKEEP_COMP_C,<br><span style="padding-left:20px"> TKEEP_FIXED_C,<br><span style="padding-left:20px"> TKEEP_COUNT_C)      |                                                                                                                                                                                                                                                                    |
| AxiStreamConfigType        |                                                                                                                                                                               |                                                                                                                                                                                                                                                                    |
| AxiStreamConfigArray       | array (natural range<>) of AxiStreamConfigType                                                                                                                                |                                                                                                                                                                                                                                                                    |
| AxiStreamConfigVectorArray | array (natural range<>,<br><span style="padding-left:20px"> natural range<>) of AxiStreamConfigType                                                                           |                                                                                                                                                                                                                                                                    |
| AxiStreamCtrlType          |                                                                                                                                                                               | -----------------------------------------------------------------------------------------------  Special control backpressure interface for use with stream fifos -----------------------------------------------------------------------------------------------  |
| AxiStreamCtrlArray         | array (natural range<>) of AxiStreamCtrlType                                                                                                                                  |                                                                                                                                                                                                                                                                    |
| AxiStreamCtrlVectorArray   | array (natural range<>,<br><span style="padding-left:20px"> natural range<>) of AxiStreamCtrlType                                                                             |                                                                                                                                                                                                                                                                    |
| AxiStreamDualCtrlArray     | array (natural range <>) of AxiStreamCtrlArray(1 downto 0)                                                                                                                    |                                                                                                                                                                                                                                                                    |
| AxiStreamQuadCtrlArray     | array (natural range <>) of AxiStreamCtrlArray(3 downto 0)                                                                                                                    |                                                                                                                                                                                                                                                                    |
| AxiStreamOctalCtrlArray    | array (natural range <>) of AxiStreamCtrlArray(7 downto 0)                                                                                                                    |                                                                                                                                                                                                                                                                    |
## Functions
- axiStreamMasterInit <font id="function_arguments">(constant config : AxiStreamConfigType) </font> <font id="function_return">return AxiStreamMasterType </font>
- getSlvSize <font id="function_arguments">(c          : AxiStreamConfigType) </font> <font id="function_return">return integer </font>
- toSlv <font id="function_arguments">(din             : AxiStreamMasterType;<br><span style="padding-left:20px"> c : AxiStreamConfigType) </font> <font id="function_return">return slv </font>
- toAxiStreamMaster <font id="function_arguments">(din : slv;<br><span style="padding-left:20px"> valid : sl;<br><span style="padding-left:20px"> c : AxiStreamConfigType) </font> <font id="function_return">return AxiStreamMasterType </font>
- axiStreamPacked <font id="function_arguments">( constant CONFIG_C : AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster        : AxiStreamMasterType) </font> <font id="function_return">return boolean </font>
**Description**
-----------------------------------------------------------------------------------------------
 Helper function prototypes
-----------------------------------------------------------------------------------------------

- axiStreamGetUserPos <font id="function_arguments">( axisConfig : AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster : AxiStreamMasterType;<br><span style="padding-left:20px"> bytePos    : integer := -1) </font> <font id="function_return">return integer </font>
- axiStreamGetUserField <font id="function_arguments">( axisConfig : AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster : AxiStreamMasterType;<br><span style="padding-left:20px"> bytePos    : integer := -1) </font> <font id="function_return">return slv </font>
- axiStreamGetUserBit <font id="function_arguments">( axisConfig : AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster : AxiStreamMasterType;<br><span style="padding-left:20px"> bitPos     : integer;<br><span style="padding-left:20px"> bytePos    : integer := -1) </font> <font id="function_return">return sl </font>
- axiStreamSetUserField <font id="function_arguments">( axisConfig : in    AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster : inout AxiStreamMasterType;<br><span style="padding-left:20px"> fieldValue : in    slv;<br><span style="padding-left:20px"> bytePos    : in    integer := -1) </font> <font id="function_return">return ()</font>
- axiStreamSetUserBit <font id="function_arguments">( axisConfig : in    AxiStreamConfigType;<br><span style="padding-left:20px"> axisMaster : inout AxiStreamMasterType;<br><span style="padding-left:20px"> bitPos     : in    integer;<br><span style="padding-left:20px"> bitValue   : in    sl;<br><span style="padding-left:20px"> bytePos    : in    integer := -1) </font> <font id="function_return">return ()</font>
**Description**
 -1 = last

- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : AxiStreamConfigType;<br><span style="padding-left:20px"> e : AxiStreamConfigType) </font> <font id="function_return">return AxiStreamConfigType </font>
**Description**
 -1 = last

- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : AxiStreamMasterType;<br><span style="padding-left:20px"> e : AxiStreamMasterType) </font> <font id="function_return">return AxiStreamMasterType </font>
- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : AxiStreamSlaveType;<br><span style="padding-left:20px"> e : AxiStreamSlaveType) </font> <font id="function_return">return AxiStreamSlaveType </font>
- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : AxiStreamCtrlType;<br><span style="padding-left:20px"> e : AxiStreamCtrlType) </font> <font id="function_return">return AxiStreamCtrlType </font>
- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : TUserModeType;<br><span style="padding-left:20px"> e : TUserModeType) </font> <font id="function_return">return TUserModeType </font>
- ite <font id="function_arguments">(i : boolean;<br><span style="padding-left:20px"> t : TKeepModeType;<br><span style="padding-left:20px"> e : TKeepModeType) </font> <font id="function_return">return TKeepModeType </font>
- genTKeep <font id="function_arguments">(bytes           : natural range 0 to AXI_STREAM_MAX_TKEEP_WIDTH_C) </font> <font id="function_return">return slv </font>
- genTKeep <font id="function_arguments">(constant config : AxiStreamConfigType) </font> <font id="function_return">return slv </font>
- getTKeep <font id="function_arguments">(tKeep : slv;<br><span style="padding-left:20px"> axisConfig : AxiStreamConfigType) </font> <font id="function_return">return natural </font>
