# Entity: UdpEngineDhcp

- **File**: UdpEngineDhcp.vhd
## Diagram

![Diagram](UdpEngineDhcp.svg "Diagram")
## Description

-----------------------------------------------------------------------------
 Company    : SLAC National Accelerator Laboratory
-----------------------------------------------------------------------------
 Description: DHCP Engine
-----------------------------------------------------------------------------
 This file is part of 'SLAC Firmware Standard Library'.
 It is subject to the license terms in the LICENSE.txt file found in the
 top-level directory of this distribution and at:
    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html.
 No part of 'SLAC Firmware Standard Library', including this file,
 may be copied, modified, propagated, or distributed except according to
 the terms contained in the LICENSE.txt file.
-----------------------------------------------------------------------------
## Generics

| Generic name   | Type     | Value      | Description              |
| -------------- | -------- | ---------- | ------------------------ |
| TPD_G          | time     | 1 ns       | Simulation Generics      |
| CLK_FREQ_G     | real     | 156.25E+06 |  In units of Hz          |
| COMM_TIMEOUT_G | positive | 30         |                          |
| SYNTH_MODE_G   | string   | "inferred" | RAM/FIFO synthesis mode  |
## Ports

| Port name    | Direction | Type                | Description                |
| ------------ | --------- | ------------------- | -------------------------- |
| localMac     | in        | slv(47 downto 0)    |   big-Endian configuration |
| localIp      | in        | slv(31 downto 0)    |   big-Endian configuration |
| dhcpIp       | out       | slv(31 downto 0)    |   big-Endian configuration |
| ibDhcpMaster | in        | AxiStreamMasterType | Interface to DHCP Engine   |
| ibDhcpSlave  | out       | AxiStreamSlaveType  |                            |
| obDhcpMaster | out       | AxiStreamMasterType |                            |
| obDhcpSlave  | in        | AxiStreamSlaveType  |                            |
| clk          | in        | sl                  | Clock and Reset            |
| rst          | in        | sl                  |                            |
## Signals

| Name     | Type                | Description |
| -------- | ------------------- | ----------- |
| r        | RegType             |             |
| rin      | RegType             |             |
| rxMaster | AxiStreamMasterType |             |
| rxSlave  | AxiStreamSlaveType  |             |
| txMaster | AxiStreamMasterType |             |
| txSlave  | AxiStreamSlaveType  |             |
## Constants

| Name           | Type                | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Description |
| -------------- | ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| DHCP_CONFIG_C  | AxiStreamConfigType |  ssiAxiStreamConfig(4)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |             |
| TIMER_1_SEC_C  | natural             |  getTimeRatio(CLK_FREQ_G,<br><span style="padding-left:20px"> 1.0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |             |
| CLIENT_HDR_C   | slv(31 downto 0)    |  x"00060101"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |  0x01010600 |
| SERVER_HDR_C   | slv(31 downto 0)    |  x"00060102"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |  0x02010600 |
| MAGIC_COOKIE_C | slv(31 downto 0)    |  x"63538263"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |  0x63825363 |
| COMM_TIMEOUT_C | positive            |  ite((COMM_TIMEOUT_G > 3),<br><span style="padding-left:20px"> COMM_TIMEOUT_G,<br><span style="padding-left:20px"> 3)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             |
| REG_INIT_C     | RegType             |  (       localMac   => (others => '0'),<br><span style="padding-left:20px">       heartbeat  => '0',<br><span style="padding-left:20px">       cnt        => 0,<br><span style="padding-left:20px">       timer      => 0,<br><span style="padding-left:20px">       commCnt    => 3,<br><span style="padding-left:20px">                  -- Default to 3 seconds after bootup       renewCnt   => (others => '0'),<br><span style="padding-left:20px">       leaseCnt   => (others => '0'),<br><span style="padding-left:20px">       leaseTime  => (others => '0'),<br><span style="padding-left:20px">       remoteMac  => (others => '1'),<br><span style="padding-left:20px">    -- Broadcast MAC Address       remoteIp   => (others => '1'),<br><span style="padding-left:20px">    -- Broadcast IP Address       dhcpIP     => (others => '0'),<br><span style="padding-left:20px">       dhcpReq    => '0',<br><span style="padding-left:20px">       xid        => (others => '0'),<br><span style="padding-left:20px">       yiaddr     => (others => '0'),<br><span style="padding-left:20px">       siaddr     => (others => '0'),<br><span style="padding-left:20px">       yiaddrTemp => (others => '0'),<br><span style="padding-left:20px">       siaddrTemp => (others => '0'),<br><span style="padding-left:20px">       index      => 0,<br><span style="padding-left:20px">       valid      => (others => '0'),<br><span style="padding-left:20px">       opCode     => (others => '0'),<br><span style="padding-left:20px">       len        => (others => '0'),<br><span style="padding-left:20px">       msgType    => (others => '0'),<br><span style="padding-left:20px">       rxSlave    => AXI_STREAM_SLAVE_INIT_C,<br><span style="padding-left:20px">       txMaster   => AXI_STREAM_MASTER_INIT_C,<br><span style="padding-left:20px">       decode     => CODE_S,<br><span style="padding-left:20px">       state      => IDLE_S) |             |
## Types

| Name       | Type                                                                                                                                                                                         | Description |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| StateType  | ( IDLE_S,<br><span style="padding-left:20px"> REQ_S,<br><span style="padding-left:20px"> BOOTP_S,<br><span style="padding-left:20px"> DHCP_S,<br><span style="padding-left:20px"> VERIFY_S)  |             |
| DecodeType | ( CODE_S,<br><span style="padding-left:20px"> LEN_S,<br><span style="padding-left:20px"> DATA_S)                                                                                             |             |
| RegType    |                                                                                                                                                                                              |             |
## Processes
- comb: ( localIp, localMac, r, rst, rxMaster, txSlave )
- seq: ( clk )
## Instantiations

- FIFO_RX: surf.AxiStreamFifoV2
- FIFO_TX: surf.AxiStreamFifoV2
