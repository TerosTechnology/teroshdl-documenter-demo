# Package: avalon_mm_bfm_pkg

## Constants

| Name                           | Type                   | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Description |
| ------------------------------ | ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| C_SCOPE                        | string                 |  "AVALON MM BFM"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| C_AVALON_MM_BFM_CONFIG_DEFAULT | t_avalon_mm_bfm_config |  (     max_wait_cycles           => 10,<br><span style="padding-left:20px">     max_wait_cycles_severity  => TB_FAILURE,<br><span style="padding-left:20px">     clock_period              => -1 ns,<br><span style="padding-left:20px">     clock_period_margin       => 0 ns,<br><span style="padding-left:20px">     clock_margin_severity     => TB_ERROR,<br><span style="padding-left:20px">     setup_time                => -1 ns,<br><span style="padding-left:20px">     hold_time                 => -1 ns,<br><span style="padding-left:20px">     bfm_sync                  => SYNC_ON_CLOCK_ONLY,<br><span style="padding-left:20px">     match_strictness          => MATCH_EXACT,<br><span style="padding-left:20px">     num_wait_states_read      => 0,<br><span style="padding-left:20px">     num_wait_states_write     => 0,<br><span style="padding-left:20px">     use_waitrequest           => true,<br><span style="padding-left:20px">     use_readdatavalid         => false,<br><span style="padding-left:20px">     use_response_signal       => true,<br><span style="padding-left:20px">     use_begintransfer         => false,<br><span style="padding-left:20px">     id_for_bfm                => ID_BFM,<br><span style="padding-left:20px">     id_for_bfm_wait           => ID_BFM_WAIT,<br><span style="padding-left:20px">     id_for_bfm_poll           => ID_BFM_POLL     ) |             |
| C_AVALON_CLOCK_PERIOD_DEFAULT  | t_avalon_clock_period  |  (       time_of_rising_edge   => -1 ns,<br><span style="padding-left:20px">       time_of_falling_edge  => -1 ns     )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |             |
## Types

| Name                        | Type                                                                                                                                                   | Description                                              |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------- |
| t_avalon_mm_if              |                                                                                                                                                        | Avalon Interface signals                                 |
| t_avalon_mm_bfm_config      |                                                                                                                                                        | Configuration record to be assigned in the test harness. |
| t_avalon_mm_response_status | (OKAY,<br><span style="padding-left:20px"> RESERVED,<br><span style="padding-left:20px"> SLAVEERROR,<br><span style="padding-left:20px"> DECODEERROR)  |                                                          |
| t_avalon_clock_period       |                                                                                                                                                        |                                                          |
## Functions
- init_avalon_mm_if_signals <font id="function_arguments">( addr_width : natural;<br><span style="padding-left:20px"> data_width : natural;<br><span style="padding-left:20px"> lock_value : std_logic := '0' ) </font> <font id="function_return">return t_avalon_mm_if </font>
- avalon_mm_write <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> constant data_value       : in  std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
**Description**
This procedure could be called from an a simple testbench orfrom an executor where there are concurrent BFMs - whereall BFMs could have different configs and msg_id_panels.From a simplified testbench it is not necessary to use argumentswhere defaults are given, e.g.:avalon_mm_write(addr, data, msg, clk, avalon_mm_if);avalon_mm_write overload without byte_enable
- avalon_mm_write <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> constant data_value       : in  std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant byte_enable      : in  std_logic_vector;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
**Description**
avalon_mm_write with byte_enable
- avalon_mm_read <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> variable data_value       : out std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT;<br><span style="padding-left:20px"> constant proc_name        : in  string                    := "avalon_mm_read"  -- Overwrite if called from another procedure ) </font> <font id="function_return">return ()</font>
- avalon_mm_check <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> constant data_exp         : in  std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant alert_level      : in  t_alert_level             := error;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
- avalon_mm_reset <font id="function_arguments">( signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant num_rst_cycles   : in  integer;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
- avalon_mm_read_request <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT;<br><span style="padding-left:20px"> constant ext_proc_call    : in  string                    := ""  -- External proc_call. Overwrite if called from another BFM procedure ) </font> <font id="function_return">return ()</font>
- avalon_mm_read_response <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> variable data_value       : out std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : in t_avalon_mm_if;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT;<br><span style="padding-left:20px"> constant proc_name        : in  string                    := "avalon_mm_read_response"  -- Overwrite if called from another procedure ) </font> <font id="function_return">return ()</font>
- avalon_mm_check_response <font id="function_arguments">( constant addr_value       : in  unsigned;<br><span style="padding-left:20px"> constant data_exp         : in  std_logic_vector;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> signal clk                : in  std_logic;<br><span style="padding-left:20px"> signal avalon_mm_if       : in t_avalon_mm_if;<br><span style="padding-left:20px"> constant alert_level      : in  t_alert_level             := error;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
- avalon_mm_lock <font id="function_arguments">( signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
- avalon_mm_unlock <font id="function_arguments">( signal avalon_mm_if       : inout t_avalon_mm_if;<br><span style="padding-left:20px"> constant msg              : in  string;<br><span style="padding-left:20px"> constant scope            : in  string                    := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel     : in  t_msg_id_panel            := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config           : in  t_avalon_mm_bfm_config    := C_AVALON_MM_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
