# Package: axi_bfm_pkg

- **File**: axi_bfm_pkg.vhd
## Description

=================================================================================================

## Constants

| Name                     | Type                            | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Description |
| ------------------------ | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| C_SCOPE                  | string                          |  "AXI_BFM"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |             |
| C_EMPTY_SLV_ARRAY        | t_slv_array(0 to 0)(0 downto 0) |  (others=>"U")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |             |
| C_EMPTY_XRESP_ARRAY      | t_xresp_array(0 to 0)           |  (others=>ILLEGAL)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |             |
| C_AXI_BFM_CONFIG_DEFAULT | t_axi_bfm_config                |  (     max_wait_cycles             => 1000,<br><span style="padding-left:20px">     max_wait_cycles_severity    => TB_FAILURE,<br><span style="padding-left:20px">     clock_period                => -1 ns,<br><span style="padding-left:20px">     clock_period_margin         => 0 ns,<br><span style="padding-left:20px">     clock_margin_severity       => TB_ERROR,<br><span style="padding-left:20px">     setup_time                  => -1 ns,<br><span style="padding-left:20px">     hold_time                   => -1 ns,<br><span style="padding-left:20px">     bfm_sync                    => SYNC_ON_CLOCK_ONLY,<br><span style="padding-left:20px">     match_strictness            => MATCH_EXACT,<br><span style="padding-left:20px">     num_aw_pipe_stages          => 1,<br><span style="padding-left:20px">     num_w_pipe_stages           => 1,<br><span style="padding-left:20px">     num_ar_pipe_stages          => 1,<br><span style="padding-left:20px">     num_r_pipe_stages           => 1,<br><span style="padding-left:20px">     num_b_pipe_stages           => 1,<br><span style="padding-left:20px">     id_for_bfm                  => ID_BFM,<br><span style="padding-left:20px">     id_for_bfm_wait             => ID_BFM_WAIT,<br><span style="padding-left:20px">     id_for_bfm_poll             => ID_BFM_POLL     ) |             |
## Types

| Name                         | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Description                                                |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |
| t_xresp                      | ( OKAY,<br><span style="padding-left:20px"> EXOKAY,<br><span style="padding-left:20px"> SLVERR,<br><span style="padding-left:20px"> DECERR,<br><span style="padding-left:20px"> ILLEGAL )                                                                                                                                                                                                                                                                                                                       |                                                            |
| t_xresp_array                | array (natural range <>) of t_xresp                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                            |
| t_axprot                     | ( UNPRIVILEGED_NONSECURE_DATA,<br><span style="padding-left:20px"> UNPRIVILEGED_NONSECURE_INSTRUCTION,<br><span style="padding-left:20px"> UNPRIVILEGED_SECURE_DATA,<br><span style="padding-left:20px"> UNPRIVILEGED_SECURE_INSTRUCTION,<br><span style="padding-left:20px"> PRIVILEGED_NONSECURE_DATA,<br><span style="padding-left:20px"> PRIVILEGED_NONSECURE_INSTRUCTION,<br><span style="padding-left:20px"> PRIVILEGED_SECURE_DATA,<br><span style="padding-left:20px"> PRIVILEGED_SECURE_INSTRUCTION )  |                                                            |
| t_axburst                    | ( FIXED,<br><span style="padding-left:20px"> INCR,<br><span style="padding-left:20px"> WRAP )                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                            |
| t_axlock                     | ( NORMAL,<br><span style="padding-left:20px"> EXCLUSIVE )                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                            |
| t_axi_bfm_config             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  Configuration record to be assigned in the test harness.  |
| t_axi_write_address_channel  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  AXI Interface signals                                     |
| t_axi_write_data_channel     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                            |
| t_axi_write_response_channel |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                            |
| t_axi_read_address_channel   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                            |
| t_axi_read_data_channel      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                            |
| t_axi_if                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                            |
## Functions
- init_axi_if_signals <font id="function_arguments">( addr_width : natural;<br><span style="padding-left:20px"> data_width : natural;<br><span style="padding-left:20px"> id_width   : natural;<br><span style="padding-left:20px"> user_width : natural ) </font> <font id="function_return">return t_axi_if </font>
**Description**
===============================================================================================
 BFM procedures
===============================================================================================
----------------------------------------
 init_axi_if_signals
----------------------------------------
 - This function returns an AXI interface with initialized signals.
 - All AXI input signals are initialized to 0
 - All AXI output signals are initialized to Z

- axprot_to_slv <font id="function_arguments">( axprot : t_axprot ) </font> <font id="function_return">return std_logic_vector </font>
- xresp_to_slv <font id="function_arguments">( xresp : t_xresp ) </font> <font id="function_return">return std_logic_vector </font>
- slv_to_xresp <font id="function_arguments">( value : std_logic_vector(1 downto 0) ) </font> <font id="function_return">return t_xresp </font>
- axburst_to_slv <font id="function_arguments">( axburst : t_axburst ) </font> <font id="function_return">return std_logic_vector </font>
- bytes_to_axsize <font id="function_arguments">( constant bytes : positive ) </font> <font id="function_return">return std_logic_vector </font>
- axlock_to_sl <font id="function_arguments">( constant axlock : t_axlock ) </font> <font id="function_return">return std_logic </font>
- axi_write <font id="function_arguments">( constant awid_value         : in    std_logic_vector              := "";<br><span style="padding-left:20px"> constant awaddr_value       : in    unsigned;<br><span style="padding-left:20px"> constant awlen_value        : in    unsigned(7 downto 0)          := (others=>'0');<br><span style="padding-left:20px"> constant awsize_value       : in    integer range 1 to 128        := 4;<br><span style="padding-left:20px"> constant awburst_value      : in    t_axburst                     := INCR;<br><span style="padding-left:20px"> constant awlock_value       : in    t_axlock                      := NORMAL;<br><span style="padding-left:20px"> constant awcache_value      : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant awprot_value       : in    t_axprot                      := UNPRIVILEGED_NONSECURE_DATA;<br><span style="padding-left:20px"> constant awqos_value        : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant awregion_value     : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant awuser_value       : in    std_logic_vector              := "";<br><span style="padding-left:20px"> constant wdata_value        : in    t_slv_array;<br><span style="padding-left:20px"> constant wstrb_value        : in    t_slv_array                   := C_EMPTY_SLV_ARRAY;<br><span style="padding-left:20px"> constant wuser_value        : in    t_slv_array                   := C_EMPTY_SLV_ARRAY;<br><span style="padding-left:20px"> variable buser_value        : out   std_logic_vector;<br><span style="padding-left:20px"> variable bresp_value        : out   t_xresp;<br><span style="padding-left:20px"> constant msg                : in    string;<br><span style="padding-left:20px"> signal   clk                : in    std_logic;<br><span style="padding-left:20px"> signal   axi_if             : inout t_axi_if;<br><span style="padding-left:20px"> constant scope              : in    string                        := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel       : in    t_msg_id_panel                := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config             : in    t_axi_bfm_config              := C_AXI_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
**Description**
----------------------------------------
 axi_write
----------------------------------------
 This procedure writes data to the AXI interface specified in axi_if
 - When the write is completed, a log message is issued with log ID id_for_bfm

- axi_read <font id="function_arguments">( constant arid_value     : in    std_logic_vector              := "";<br><span style="padding-left:20px"> constant araddr_value   : in    unsigned;<br><span style="padding-left:20px"> constant arlen_value    : in    unsigned(7 downto 0)          := (others=>'0');<br><span style="padding-left:20px"> constant arsize_value   : in    integer range 1 to 128        := 4;<br><span style="padding-left:20px"> constant arburst_value  : in    t_axburst                     := INCR;<br><span style="padding-left:20px"> constant arlock_value   : in    t_axlock                      := NORMAL;<br><span style="padding-left:20px"> constant arcache_value  : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant arprot_value   : in    t_axprot                      := UNPRIVILEGED_NONSECURE_DATA;<br><span style="padding-left:20px"> constant arqos_value    : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant arregion_value : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant aruser_value   : in    std_logic_vector              := "";<br><span style="padding-left:20px"> variable rdata_value    : out   t_slv_array;<br><span style="padding-left:20px"> variable rresp_value    : out   t_xresp_array;<br><span style="padding-left:20px"> variable ruser_value    : out   t_slv_array;<br><span style="padding-left:20px"> constant msg            : in    string;<br><span style="padding-left:20px"> signal   clk            : in    std_logic;<br><span style="padding-left:20px"> signal   axi_if         : inout t_axi_if;<br><span style="padding-left:20px"> constant scope          : in    string                        := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel   : in    t_msg_id_panel                := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config         : in    t_axi_bfm_config              := C_AXI_BFM_CONFIG_DEFAULT;<br><span style="padding-left:20px"> constant ext_proc_call  : in    string                        := ""  -- External proc_call. Overwrite if called from another BFM procedure ) </font> <font id="function_return">return ()</font>
**Description**
----------------------------------------
 axi_read
----------------------------------------
 This procedure reads data from the AXI interface specified in axi_if,
 and returns the read data in rdata_value.

- axi_check <font id="function_arguments">( constant arid_value     : in    std_logic_vector              := "";<br><span style="padding-left:20px"> constant araddr_value   : in    unsigned;<br><span style="padding-left:20px"> constant arlen_value    : in    unsigned(7 downto 0)          := (others=>'0');<br><span style="padding-left:20px"> constant arsize_value   : in    integer range 1 to 128        := 4;<br><span style="padding-left:20px"> constant arburst_value  : in    t_axburst                     := INCR;<br><span style="padding-left:20px"> constant arlock_value   : in    t_axlock                      := NORMAL;<br><span style="padding-left:20px"> constant arcache_value  : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant arprot_value   : in    t_axprot                      := UNPRIVILEGED_NONSECURE_DATA;<br><span style="padding-left:20px"> constant arqos_value    : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant arregion_value : in    std_logic_vector(3 downto 0)  := (others=>'0');<br><span style="padding-left:20px"> constant aruser_value   : in    std_logic_vector              := "";<br><span style="padding-left:20px"> constant rdata_exp      : in    t_slv_array;<br><span style="padding-left:20px"> constant rresp_exp      : in    t_xresp_array                 := C_EMPTY_XRESP_ARRAY;<br><span style="padding-left:20px"> constant ruser_exp      : in    t_slv_array                   := C_EMPTY_SLV_ARRAY;<br><span style="padding-left:20px"> constant msg            : in    string;<br><span style="padding-left:20px"> signal   clk            : in    std_logic;<br><span style="padding-left:20px"> signal   axi_if         : inout t_axi_if;<br><span style="padding-left:20px"> constant alert_level    : in    t_alert_level                 := error;<br><span style="padding-left:20px"> constant scope          : in    string                        := C_SCOPE;<br><span style="padding-left:20px"> constant msg_id_panel   : in    t_msg_id_panel                := shared_msg_id_panel;<br><span style="padding-left:20px"> constant config         : in    t_axi_bfm_config              := C_AXI_BFM_CONFIG_DEFAULT ) </font> <font id="function_return">return ()</font>
**Description**
----------------------------------------
 axi_check
----------------------------------------
 This procedure reads data from the AXI interface specified in axi_if,
 and compares it to the data in data_exp.
 - If the received data inconsistent with data_exp, an alert with severity
   alert_level is issued.
 - If the received data was correct, a log message with ID id_for_bfm is issued.

