# Package: flash_phy_pkg

- **File**: flash_phy_pkg.sv
## Description

Copyright lowRISC contributors.
 Licensed under the Apache License, Version 2.0, see LICENSE for details.
 SPDX-License-Identifier: Apache-2.0
 Flash phy module package
 

## Constants

| Name              | Type | Value                               | Description                                                                                    |
| ----------------- | ---- | ----------------------------------- | ---------------------------------------------------------------------------------------------- |
| NumBanks          | int  | flash_ctrl_pkg::NumBanks            |                                                                                                |
| InfosPerBank      | int  | flash_ctrl_pkg::InfosPerBank        |                                                                                                |
| PagesPerBank      | int  | flash_ctrl_pkg::PagesPerBank        |                                                                                                |
| WordsPerPage      | int  | flash_ctrl_pkg::WordsPerPage        |                                                                                                |
| BankW             | int  | flash_ctrl_pkg::BankW               |                                                                                                |
| PageW             | int  | flash_ctrl_pkg::PageW               |                                                                                                |
| WordW             | int  | flash_ctrl_pkg::WordW               |                                                                                                |
| BankAddrW         | int  | flash_ctrl_pkg::BankAddrW           |                                                                                                |
| DataWidth         | int  | flash_ctrl_pkg::DataWidth           |                                                                                                |
| EccWidth          | int  | 8                                   |                                                                                                |
| MetaDataWidth     | int  | flash_ctrl_pkg::MetaDataWidth       |                                                                                                |
| WidthMultiple     | int  | flash_ctrl_pkg::WidthMultiple       |                                                                                                |
| NumBuf            | int  | 4                                   | number of flash read buffers                                                                   |
| RspOrderDepth     | int  | 2                                   | this should be DataWidth / BusWidth                                                            |
| ScrDataWidth      | int  | DataWidth + EccWidth                | will switch to this after bus widening                                                         |
| FullDataWidth     | int  | DataWidth + MetaDataWidth           |                                                                                                |
| InfoTypes         | int  | flash_ctrl_pkg::InfoTypes           |                                                                                                |
| InfoTypesWidth    | int  | flash_ctrl_pkg::InfoTypesWidth      |                                                                                                |
| BusWidth          | int  | flash_ctrl_pkg::BusWidth            | flash ctrl / bus parameters                                                                    |
| BusBankAddrW      | int  | flash_ctrl_pkg::BusBankAddrW        |                                                                                                |
| BusWordW          | int  | flash_ctrl_pkg::BusWordW            |                                                                                                |
| ProgTypes         | int  | flash_ctrl_pkg::ProgTypes           |                                                                                                |
| AddrBitsRemain    | int  | DataWidth % BusWidth                | address bits remain must be 0                                                                  |
| LsbAddrBit        | int  | $clog2(WidthMultiple)               | base index This is the lsb position of the prim flash address when looking at the bus address  |
| WordSelW          | int  | WidthMultiple == 1 ? 1 : LsbAddrBit |                                                                                                |
| KeySize           | int  | 128                                 | scramble / de-scramble parameters Number of cycles the gf_mult is given to complete            |
| GfMultCycles      | int  | 2                                   |                                                                                                |
| CipherCycles      | int  | 2                                   | If this value is greater than 1, constraints must be updated for multicycle paths              |
| RspOrderFifoWidth | int  | $bits(rsp_fifo_entry_t)             |                                                                                                |
| PhyOps            | int  | 4                                   |                                                                                                |
## Types

| Name                       | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Description                 |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| rd_buf_attr_e              | enum logic [1:0] {<br><span style="padding-left:20px">     Invalid     = 2'h0,<br><span style="padding-left:20px">     Wip         = 2'h1,<br><span style="padding-left:20px">     Valid       = 2'h2,<br><span style="padding-left:20px">     Undef       = 2'h3   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Read buffer metadata        |
| rd_buf_t                   | struct packed {<br><span style="padding-left:20px">     logic [DataWidth-1:0] data;<br><span style="padding-left:20px">     logic [BankAddrW-1:0] addr;<br><span style="padding-left:20px">      logic part;<br><span style="padding-left:20px">     logic [InfoTypesWidth-1:0] info_sel;<br><span style="padding-left:20px">     rd_buf_attr_e attr;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                             |
| rsp_fifo_entry_t           | struct packed {<br><span style="padding-left:20px">     logic [NumBuf-1:0] buf_sel;<br><span style="padding-left:20px">     logic [WordSelW-1:0] word_sel;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                             |
| rd_attr_t                  | struct packed {<br><span style="padding-left:20px">     logic [BankAddrW-1:0] addr;<br><span style="padding-left:20px">     logic descramble;<br><span style="padding-left:20px">     logic ecc;<br><span style="padding-left:20px">     tlul_pkg::tl_type_e req_type;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                             |
| flash_phy_op_e             | enum logic [1:0] {<br><span style="padding-left:20px">     PhyRead      = 2'h0,<br><span style="padding-left:20px">     PhyProg      = 2'h1,<br><span style="padding-left:20px">     PhyPgErase   = 2'h2,<br><span style="padding-left:20px">     PhyBkErase   = 2'h3   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Flash Operations Supported  |
| flash_phy_op_sel_e         | enum logic [1:0] {<br><span style="padding-left:20px">     None         = 2'h0,<br><span style="padding-left:20px">     Host         = 2'h1,<br><span style="padding-left:20px">     Ctrl         = 2'h2   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Flash Operations Selected   |
| cipher_ops_e               | enum logic {<br><span style="padding-left:20px">     ScrambleOp   = 1'b0,<br><span style="padding-left:20px">     DeScrambleOp = 1'b1   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                             |
| flash_phy_prim_flash_req_t | struct packed {<br><span style="padding-left:20px">     logic rd_req;<br><span style="padding-left:20px">     logic prog_req;<br><span style="padding-left:20px">     logic prog_last;<br><span style="padding-left:20px">     flash_ctrl_pkg::flash_prog_e prog_type;<br><span style="padding-left:20px">     logic pg_erase_req;<br><span style="padding-left:20px">     logic bk_erase_req;<br><span style="padding-left:20px">     logic erase_suspend_req;<br><span style="padding-left:20px">     logic he;<br><span style="padding-left:20px">     logic [BankAddrW-1:0] addr;<br><span style="padding-left:20px">     flash_ctrl_pkg::flash_part_e part;<br><span style="padding-left:20px">     logic [InfoTypesWidth-1:0] info_sel;<br><span style="padding-left:20px">     logic [FullDataWidth-1:0] prog_full_data;<br><span style="padding-left:20px">   } | Connections to prim_flash   |
| flash_phy_prim_flash_rsp_t | struct packed {<br><span style="padding-left:20px">     logic ack;<br><span style="padding-left:20px">     logic done;<br><span style="padding-left:20px">     logic [FullDataWidth-1:0] rdata;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                             |
