
<style>
  table {
    width:70%;
    margin-left: auto;
    margin-right: auto
  }
  svg {
    width:68%;
    height:30%;
    display:block;  
    margin-left: auto;
    margin-right: auto
  }
  h1, h2, h3, h4 {
    margin-left:1.5%;
    width:98%;
    font-weight:bold
  }
  code {
    color:#545253;
  }
  p {
    width: 98%;
    color:black;
    margin-top:5px;
    margin-bottom:5px 
  }
  * {
    color:black;
    line-height: 1.6;
  }
  li{
    margin: 20px 0;
  }
  #function_return{
    font-weight: bold;
    color:green;
  }
  #teroshdl_description, li {
    width: 95%;
    margin-left:2%;
    margin-right:2%;
  }
  #function_arguments{
    color:black;
  }
  #descriptions{
    width: 90%;
    margin-left:5.5%;
    margin-right:3%;
  }
  div.templateTerosHDL {
    background-color: white;
    position:absolute;
  }
  td, th {
    padding:2px; 
    border: 1px solid grey;
  }
  th {
    background-color: #ffd78c;
  }
  tr:hover {
    background-color: #ddd;
  }
  tr:nth-child(even){
    background-color: #f2f2f2;
  }
</style>
<div id="teroshdl" class='templateTerosHDL'>
<a id=prim_ram_1p_scr><h1 id="entity-prim_ram_1p_scr">Entity: prim_ram_1p_scr</h1></a><h2 id="diagram">Diagram</h2><p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 815 630"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="325,0 340,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="320" height="330" fill="black" x="340" y="0"></rect><rect id="SvgjsRect1007" width="316" height="325" fill="#bdecb6" x="342" y="2"></rect><text id="SvgjsText1008" font-family="Helvetica" x="320" y="-5.698437500000001" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="355" y="-5.698437500000001" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   Depth </tspan></text><line id="SvgjsLine1012" x1="325" y1="15" x2="340" y2="15" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="320" y="14.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="355" y="14.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   Width </tspan></text><line id="SvgjsLine1017" x1="325" y1="35" x2="340" y2="35" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1018" font-family="Helvetica" x="320" y="34.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1019" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1020" font-family="Helvetica" x="355" y="34.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   DataBitsPerMask </tspan></text><line id="SvgjsLine1022" x1="325" y1="55" x2="340" y2="55" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1023" font-family="Helvetica" x="320" y="54.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1024" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   bit </tspan></text><text id="SvgjsText1025" font-family="Helvetica" x="355" y="54.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   EnableParity </tspan></text><line id="SvgjsLine1027" x1="325" y1="75" x2="340" y2="75" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1028" font-family="Helvetica" x="320" y="74.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1029" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1030" font-family="Helvetica" x="355" y="74.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NumPrinceRoundsHalf </tspan></text><line id="SvgjsLine1032" x1="325" y1="95" x2="340" y2="95" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1033" font-family="Helvetica" x="320" y="94.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1034" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1035" font-family="Helvetica" x="355" y="94.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NumDiffRounds </tspan></text><line id="SvgjsLine1037" x1="325" y1="115" x2="340" y2="115" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1038" font-family="Helvetica" x="320" y="114.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1039" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1040" font-family="Helvetica" x="355" y="114.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   DiffWidth </tspan></text><line id="SvgjsLine1042" x1="325" y1="135" x2="340" y2="135" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1043" font-family="Helvetica" x="320" y="134.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1044" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1045" font-family="Helvetica" x="355" y="134.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NumAddrScrRounds </tspan></text><line id="SvgjsLine1047" x1="325" y1="155" x2="340" y2="155" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1048" font-family="Helvetica" x="320" y="154.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1049" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   bit </tspan></text><text id="SvgjsText1050" font-family="Helvetica" x="355" y="154.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   ReplicateKeyStream </tspan></text><line id="SvgjsLine1052" x1="325" y1="175" x2="340" y2="175" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1053" font-family="Helvetica" x="320" y="174.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1054" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1055" font-family="Helvetica" x="355" y="174.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   LfsrWidth </tspan></text><line id="SvgjsLine1057" x1="325" y1="195" x2="340" y2="195" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1058" font-family="Helvetica" x="320" y="194.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1059" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   logic [LfsrWidth-1:0][$clog2(LfsrWidth)-1:0] </tspan></text><text id="SvgjsText1060" font-family="Helvetica" x="355" y="194.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1061" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   LfsrWidth </tspan></text><line id="SvgjsLine1062" x1="325" y1="215" x2="340" y2="215" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1063" font-family="Helvetica" x="320" y="214.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1064" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1065" font-family="Helvetica" x="355" y="214.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1066" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   AddrWidth </tspan></text><line id="SvgjsLine1067" x1="325" y1="235" x2="340" y2="235" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1068" font-family="Helvetica" x="320" y="234.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1069" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1070" font-family="Helvetica" x="355" y="234.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1071" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NumParScr </tspan></text><line id="SvgjsLine1072" x1="325" y1="255" x2="340" y2="255" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1073" font-family="Helvetica" x="320" y="254.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1074" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1075" font-family="Helvetica" x="355" y="254.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1076" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NumParKeystr </tspan></text><line id="SvgjsLine1077" x1="325" y1="275" x2="340" y2="275" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1078" font-family="Helvetica" x="320" y="274.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1079" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1080" font-family="Helvetica" x="355" y="274.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1081" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   DataKeyWidth </tspan></text><line id="SvgjsLine1082" x1="325" y1="295" x2="340" y2="295" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1083" font-family="Helvetica" x="320" y="294.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1084" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   int </tspan></text><text id="SvgjsText1085" font-family="Helvetica" x="355" y="294.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1086" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   NonceWidth </tspan></text><line id="SvgjsLine1087" x1="325" y1="315" x2="340" y2="315" stroke-linecap="rec" stroke="black" stroke-width="5"></line><rect id="SvgjsRect1088" width="320" height="290" fill="black" x="340" y="335"></rect><rect id="SvgjsRect1089" width="316" height="285" fill="#fdfd96" x="342" y="337"></rect><text id="SvgjsText1090" font-family="Helvetica" x="320" y="329.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1091" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1092" font-family="Helvetica" x="355" y="329.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1093" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   clk_i </tspan></text><line id="SvgjsLine1094" x1="325" y1="350" x2="340" y2="350" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1095" font-family="Helvetica" x="320" y="349.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1096" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1097" font-family="Helvetica" x="355" y="349.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1098" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   rst_ni </tspan></text><line id="SvgjsLine1099" x1="325" y1="370" x2="340" y2="370" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1100" font-family="Helvetica" x="320" y="369.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1101" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1102" font-family="Helvetica" x="355" y="369.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1103" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   key_valid_i </tspan></text><line id="SvgjsLine1104" x1="325" y1="390" x2="340" y2="390" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1105" font-family="Helvetica" x="320" y="389.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1106" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [DataKeyWidth-1:0] </tspan></text><text id="SvgjsText1107" font-family="Helvetica" x="355" y="389.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1108" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   key_i </tspan></text><line id="SvgjsLine1109" x1="325" y1="410" x2="340" y2="410" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1110" font-family="Helvetica" x="320" y="409.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1111" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [NonceWidth-1:0] </tspan></text><text id="SvgjsText1112" font-family="Helvetica" x="355" y="409.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1113" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   nonce_i </tspan></text><line id="SvgjsLine1114" x1="325" y1="430" x2="340" y2="430" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1115" font-family="Helvetica" x="320" y="429.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1116" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [LfsrWidth-1:0] </tspan></text><text id="SvgjsText1117" font-family="Helvetica" x="355" y="429.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1118" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   init_seed_i </tspan></text><line id="SvgjsLine1119" x1="325" y1="450" x2="340" y2="450" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1120" font-family="Helvetica" x="320" y="449.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1121" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1122" font-family="Helvetica" x="355" y="449.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1123" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   init_req_i </tspan></text><line id="SvgjsLine1124" x1="325" y1="470" x2="340" y2="470" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1125" font-family="Helvetica" x="320" y="469.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1126" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1127" font-family="Helvetica" x="355" y="469.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1128" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   req_i </tspan></text><line id="SvgjsLine1129" x1="325" y1="490" x2="340" y2="490" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1130" font-family="Helvetica" x="320" y="489.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1131" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1132" font-family="Helvetica" x="355" y="489.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1133" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   write_i </tspan></text><line id="SvgjsLine1134" x1="325" y1="510" x2="340" y2="510" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1135" font-family="Helvetica" x="320" y="509.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1136" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [AddrWidth-1:0] </tspan></text><text id="SvgjsText1137" font-family="Helvetica" x="355" y="509.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1138" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   addr_i </tspan></text><line id="SvgjsLine1139" x1="325" y1="530" x2="340" y2="530" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1140" font-family="Helvetica" x="320" y="529.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1141" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [Width-1:0] </tspan></text><text id="SvgjsText1142" font-family="Helvetica" x="355" y="529.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1143" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   wdata_i </tspan></text><line id="SvgjsLine1144" x1="325" y1="550" x2="340" y2="550" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1145" font-family="Helvetica" x="320" y="549.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1146" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   [Width-1:0] </tspan></text><text id="SvgjsText1147" font-family="Helvetica" x="355" y="549.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1148" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   wmask_i </tspan></text><line id="SvgjsLine1149" x1="325" y1="570" x2="340" y2="570" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1150" font-family="Helvetica" x="320" y="569.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1151" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1152" font-family="Helvetica" x="355" y="569.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1153" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   intg_error_i </tspan></text><line id="SvgjsLine1154" x1="325" y1="590" x2="340" y2="590" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1155" font-family="Helvetica" x="320" y="589.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1156" dy="26" x="320" svgjs:data="{&quot;newLined&quot;:true}">   ram_1p_cfg_t </tspan></text><text id="SvgjsText1157" font-family="Helvetica" x="355" y="589.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1158" dy="26" x="355" svgjs:data="{&quot;newLined&quot;:true}">   cfg_i </tspan></text><line id="SvgjsLine1159" x1="325" y1="610" x2="340" y2="610" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1160" font-family="Helvetica" x="680" y="329.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1161" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1162" font-family="Helvetica" x="645" y="329.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1163" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   init_ack_o </tspan></text><line id="SvgjsLine1164" x1="660" y1="350" x2="675" y2="350" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1165" font-family="Helvetica" x="680" y="349.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1166" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1167" font-family="Helvetica" x="645" y="349.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1168" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   gnt_o </tspan></text><line id="SvgjsLine1169" x1="660" y1="370" x2="675" y2="370" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1170" font-family="Helvetica" x="680" y="369.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1171" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">   [Width-1:0] </tspan></text><text id="SvgjsText1172" font-family="Helvetica" x="645" y="369.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1173" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   rdata_o </tspan></text><line id="SvgjsLine1174" x1="660" y1="390" x2="675" y2="390" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1175" font-family="Helvetica" x="680" y="389.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1176" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1177" font-family="Helvetica" x="645" y="389.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1178" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   rvalid_o </tspan></text><line id="SvgjsLine1179" x1="660" y1="410" x2="675" y2="410" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1180" font-family="Helvetica" x="680" y="409.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1181" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">   [1:0] </tspan></text><text id="SvgjsText1182" font-family="Helvetica" x="645" y="409.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1183" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   rerror_o </tspan></text><line id="SvgjsLine1184" x1="660" y1="430" x2="675" y2="430" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1185" font-family="Helvetica" x="680" y="429.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1186" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">   [31:0] </tspan></text><text id="SvgjsText1187" font-family="Helvetica" x="645" y="429.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1188" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   raddr_o </tspan></text><line id="SvgjsLine1189" x1="660" y1="450" x2="675" y2="450" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1190" font-family="Helvetica" x="680" y="449.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1191" dy="26" x="680" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1192" font-family="Helvetica" x="645" y="449.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1193" dy="26" x="645" svgjs:data="{&quot;newLined&quot;:true}">   intg_error_o </tspan></text><line id="SvgjsLine1194" x1="660" y1="470" x2="675" y2="470" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg></p><h2 id="description">Description</h2><div id="teroshdl_description"><p>Copyright lowRISC contributors. Licensed under the Apache License, Version 2.0, see LICENSE for details. SPDX-License-Identifier: Apache-2.0 This is a draft implementation of a low-latency memory scrambling mechanism. The module is implemented as a primitive, in the same spirit as similar prim_ram_1p_adv wrappers. Hence, it can be conveniently instantiated by comportable IPs (such as OTBN) or in top_earlgrey for the main system memory. The currently implemented architecture uses a reduced-round PRINCE cipher primitive in CTR mode in order to (weakly) scramble the data written to the memory macro. Plain CTR mode does not diffuse the data since the keystream is just XOR'ed onto it, hence we also we perform byte-wise diffusion using a (shallow) substitution/permutation network layers in order to provide a limited avalanche effect within a byte. In order to break the linear addressing space, the address is passed through a bijective scrambling function constructed using a (shallow) substitution/permutation and a nonce. Due to that nonce, the address mapping is not fully baked into RTL and can be changed at runtime as well. See also: prim_cipher_pkg, prim_prince</p></div><h2 id="generics">Generics</h2>
<table>
<thead>
<tr>
<th id="generic_name">Generic name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Depth</td>
<td>int</td>
<td>16*1024</td>
<td>Needs to be a power of 2 if NumAddrScrRounds &gt; 0.</td>
</tr>
<tr>
<td>Width</td>
<td>int</td>
<td>32</td>
<td>Needs to be byte aligned if byte parity is enabled.</td>
</tr>
<tr>
<td>DataBitsPerMask</td>
<td>int</td>
<td>8</td>
<td>Needs to be set to 8 in case of byte parity.</td>
</tr>
<tr>
<td>EnableParity</td>
<td>bit</td>
<td>1</td>
<td>Enable byte parity.</td>
</tr>
<tr>
<td>NumPrinceRoundsHalf</td>
<td>int</td>
<td>2</td>
<td>Scrambling parameters. Note that this needs to be low-latency, hence we have to keep the amount of cipher rounds low. PRINCE has 5 half rounds in its original form, which corresponds to 2*5 + 1 effective rounds. Setting this to 2 halves this to approximately 5 effective rounds. Number of PRINCE half rounds, can be [1..5]</td>
</tr>
<tr>
<td>NumDiffRounds</td>
<td>int</td>
<td>2</td>
<td>Number of extra diffusion rounds. Setting this to 0 to disable diffusion.</td>
</tr>
<tr>
<td>DiffWidth</td>
<td>int</td>
<td>DataBitsPerMask</td>
<td>This parameter governs the block-width of additional diffusion layers. For intra-byte diffusion, set this parameter to 8.</td>
</tr>
<tr>
<td>NumAddrScrRounds</td>
<td>int</td>
<td>2</td>
<td>Number of address scrambling rounds. Setting this to 0 disables address scrambling.</td>
</tr>
<tr>
<td>ReplicateKeyStream</td>
<td>bit</td>
<td>1'b0</td>
<td>If set to 1, the same 64bit key stream is replicated if the data port is wider than 64bit. If set to 0, the cipher primitive is replicated, and together with a wider nonce input, a unique keystream is generated for the full data width.</td>
</tr>
<tr>
<td>LfsrWidth</td>
<td>int</td>
<td>8</td>
<td>Width of lfsr seed used for random init</td>
</tr>
<tr>
<td>LfsrWidth</td>
<td>logic [LfsrWidth-1:0][$clog2(LfsrWidth)-1:0]</td>
<td></td>
<td></td>
</tr>
<tr>
<td>AddrWidth</td>
<td>int</td>
<td>prim_util_pkg::vbits(Depth)</td>
<td>Derived parameters</td>
</tr>
<tr>
<td>NumParScr</td>
<td>int</td>
<td>64</td>
<td>Depending on the data width, we need to instantiate multiple parallel cipher primitives to create a keystream that is wide enough (PRINCE has a block size of 64bit)</td>
</tr>
<tr>
<td>NumParKeystr</td>
<td>int</td>
<td>64</td>
<td></td>
</tr>
<tr>
<td>DataKeyWidth</td>
<td>int</td>
<td>128</td>
<td>This is given by the PRINCE cipher primitive. All parallel cipher modules use the same key, but they use a different IV</td>
</tr>
<tr>
<td>NonceWidth</td>
<td>int</td>
<td>64 * NumParScr</td>
<td>Each 64 bit scrambling primitive requires a 64bit IV</td>
</tr>
</tbody>
</table>
<h2 id="ports">Ports</h2>
<table>
<thead>
<tr>
<th id="port_name">Port name</th>
<th id="direction">Direction</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>clk_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rst_ni</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>key_valid_i</td>
<td>input</td>
<td></td>
<td>Key interface. Memory requests will not be granted if key_valid is set to 0.</td>
</tr>
<tr>
<td>key_i</td>
<td>input</td>
<td>[DataKeyWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>nonce_i</td>
<td>input</td>
<td>[NonceWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>init_seed_i</td>
<td>input</td>
<td>[LfsrWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>init_req_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>init_ack_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>req_i</td>
<td>input</td>
<td></td>
<td>Interface to TL-UL SRAM adapter</td>
</tr>
<tr>
<td>gnt_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>write_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>addr_i</td>
<td>input</td>
<td>[AddrWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>wdata_i</td>
<td>input</td>
<td>[Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>wmask_i</td>
<td>input</td>
<td>[Width-1:0]</td>
<td>Needs to be byte-aligned for parity</td>
</tr>
<tr>
<td>intg_error_i</td>
<td>input</td>
<td></td>
<td>The incoming transaction contains an integrity error and the module should alterits behavior appropriately. On integrity errors, the primitive reverses the bit-order of the nonce and surpresses any real transaction to the memory.</td>
</tr>
<tr>
<td>rdata_o</td>
<td>output</td>
<td>[Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>rvalid_o</td>
<td>output</td>
<td></td>
<td>Read response (rdata_o) is valid</td>
</tr>
<tr>
<td>rerror_o</td>
<td>output</td>
<td>[1:0]</td>
<td>Bit1: Uncorrectable, Bit0: Correctable</td>
</tr>
<tr>
<td>raddr_o</td>
<td>output</td>
<td>[31:0]</td>
<td>Read address for error reporting.</td>
</tr>
<tr>
<td>intg_error_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cfg_i</td>
<td>input</td>
<td>ram_1p_cfg_t</td>
<td>config</td>
</tr>
</tbody>
</table><h2 id="signals">Signals</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>intg_err_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>init_req_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>load_seed</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>addr_cnt_q</td>
<td>logic [AddrWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>lfsr_out</td>
<td>logic [LfsrWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>init_sel</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>addr</td>
<td>logic [AddrWidth-1:0]</td>
<td>input muxed addr/data/mask</td>
</tr>
<tr>
<td>wdata</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>wmask</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>rand_val</td>
<td>logic [FullRandWidth-1:0]</td>
<td>The random value may be larger than what is needed</td>
</tr>
<tr>
<td>read_en</td>
<td>logic</td>
<td>Writes are delayed by one cycle, such the same keystream generation primitive (prim_prince) can be reused among reads and writes. Note however that with this arrangement, we have to introduce a mechanism to hold a pending write transaction in cases where that transaction is immediately followed by a read. The pending write transaction is written to memory as soon as there is no new read transaction incoming. The latter can be a special case if the incoming read goes to the same address as the pending write. To that end, we detect the address collision and return the data from the write holding register. Read / write strobes</td>
</tr>
<tr>
<td>write_en_d</td>
<td>logic</td>
<td>Writes are delayed by one cycle, such the same keystream generation primitive (prim_prince) can be reused among reads and writes. Note however that with this arrangement, we have to introduce a mechanism to hold a pending write transaction in cases where that transaction is immediately followed by a read. The pending write transaction is written to memory as soon as there is no new read transaction incoming. The latter can be a special case if the incoming read goes to the same address as the pending write. To that end, we detect the address collision and return the data from the write holding register. Read / write strobes</td>
</tr>
<tr>
<td>write_en_q</td>
<td>logic</td>
<td>Writes are delayed by one cycle, such the same keystream generation primitive (prim_prince) can be reused among reads and writes. Note however that with this arrangement, we have to introduce a mechanism to hold a pending write transaction in cases where that transaction is immediately followed by a read. The pending write transaction is written to memory as soon as there is no new read transaction incoming. The latter can be a special case if the incoming read goes to the same address as the pending write. To that end, we detect the address collision and return the data from the write holding register. Read / write strobes</td>
</tr>
<tr>
<td>write_pending_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>addr_collision_d</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>addr_collision_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>waddr_q</td>
<td>logic [AddrWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>macro_req</td>
<td>logic</td>
<td>Macro requests and write strobe The macro operation is silenced if an integrity error is seen</td>
</tr>
<tr>
<td>intg_err_macro_req</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>macro_write</td>
<td>logic</td>
<td>We are allowed to write a pending write transaction to the memory if there is no incoming read</td>
</tr>
<tr>
<td>rw_collision</td>
<td>logic</td>
<td>New read write collision</td>
</tr>
<tr>
<td>addr_mux</td>
<td>logic [AddrWidth-1:0]</td>
<td>We only select the pending write address in case there is no incoming read transaction.</td>
</tr>
<tr>
<td>addr_scr</td>
<td>logic [AddrWidth-1:0]</td>
<td>This creates a bijective address mapping using a substitution / permutation network.</td>
</tr>
<tr>
<td>raddr_q</td>
<td>logic [AddrWidth-1:0]</td>
<td>We latch the non-scrambled address for error reporting.</td>
</tr>
<tr>
<td>keystream</td>
<td>logic [NumParScr*64-1:0]</td>
<td></td>
</tr>
<tr>
<td>data_scr_nonce</td>
<td>logic [NumParScr-1:0][DataNonceWidth-1:0]</td>
<td></td>
</tr>
<tr>
<td>intg_err_data_scr</td>
<td>logic</td>
<td>TODO, expand this into copies with another primitive</td>
</tr>
<tr>
<td>keystream_repl</td>
<td>logic [Width-1:0]</td>
<td>Replicate keystream if needed</td>
</tr>
<tr>
<td>rdata_scr</td>
<td>logic [Width-1:0]</td>
<td>Data scrambling is a two step process. First, we XOR the write data with the keystream obtained by operating a reduced-round PRINCE cipher in CTR-mode. Then, we diffuse data within each byte in order to get a limited "avalanche" behavior in case parts of the bytes are flipped as a result of a malicious attempt to tamper with the data in memory. We perform the diffusion only within bytes in order to maintain the ability to write individual bytes. Note that the keystream XOR is performed first for the write path such that it can be performed last for the read path. This allows us to hide a part of the combinational delay of the PRINCE primitive behind the propagation delay of the SRAM macro and the per-byte diffusion step.</td>
</tr>
<tr>
<td>rdata</td>
<td>logic [Width-1:0]</td>
<td>Data scrambling is a two step process. First, we XOR the write data with the keystream obtained by operating a reduced-round PRINCE cipher in CTR-mode. Then, we diffuse data within each byte in order to get a limited "avalanche" behavior in case parts of the bytes are flipped as a result of a malicious attempt to tamper with the data in memory. We perform the diffusion only within bytes in order to maintain the ability to write individual bytes. Note that the keystream XOR is performed first for the write path such that it can be performed last for the read path. This allows us to hide a part of the combinational delay of the PRINCE primitive behind the propagation delay of the SRAM macro and the per-byte diffusion step.</td>
</tr>
<tr>
<td>wdata_scr_d</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>wdata_scr_q</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>wdata_q</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
<tr>
<td>write_scr_pending_d</td>
<td>logic</td>
<td>The read transaction in cycle 1 interrupts the first write transaction which has already used the PRINCE primitive for scrambling. If this sequence is followed by another write back-to-back in cycle 2, we cannot use the PRINCE primitive a second time for the first write, and hence need an additional holding register that can buffer the scrambled data of the first write in cycle 1. Clear this if we can write the memory in this cycle. Set only if the current write cannot proceed due to an incoming read operation.</td>
</tr>
<tr>
<td>wdata_scr</td>
<td>logic [Width-1:0]</td>
<td>Select the correct scrambled word to be written, based on whether the word in the scrambled data holding register is valid or not. Note that the write_scr_q register could in theory be combined with the wdata_q register. We don't do that here for timing reasons, since that would require another read data mux to inject the scrambled data into the read descrambling path.</td>
</tr>
<tr>
<td>rvalid_q</td>
<td>logic</td>
<td>Output read valid strobe</td>
</tr>
<tr>
<td>wmask_q</td>
<td>logic [Width-1:0]</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="constants">Constants</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AddrWidth</td>
<td>int</td>
<td>prim_util_pkg::vbits(Depth)</td>
<td>Derived parameters</td>
</tr>
<tr>
<td>NumParScr</td>
<td>int</td>
<td>64</td>
<td>Depending on the data width, we need to instantiate multiple parallel cipher primitives to create a keystream that is wide enough (PRINCE has a block size of 64bit)</td>
</tr>
<tr>
<td>NumParKeystr</td>
<td>int</td>
<td>64</td>
<td></td>
</tr>
<tr>
<td>DataKeyWidth</td>
<td>int</td>
<td>128</td>
<td>This is given by the PRINCE cipher primitive. All parallel cipher modules use the same key, but they use a different IV</td>
</tr>
<tr>
<td>NonceWidth</td>
<td>int</td>
<td>64 * NumParScr</td>
<td>Each 64 bit scrambling primitive requires a 64bit IV</td>
</tr>
<tr>
<td>LfsrMult</td>
<td>int</td>
<td>Width / LfsrWidth + 1</td>
<td>The lfsr width and the width of the data may not be completely aligned</td>
</tr>
<tr>
<td>FullRandWidth</td>
<td>int</td>
<td>LfsrMult * LfsrWidth</td>
<td></td>
</tr>
<tr>
<td>DataNonceWidth</td>
<td>int</td>
<td>64 - AddrWidth</td>
<td>This encrypts the IV consisting of the nonce and address using the key provided in order to generate the keystream for the data. Note that we instantiate a register halfway within this primitive to balance the delay between request and response side.</td>
</tr>
</tbody>
</table><h2 id="processes">Processes</h2><ul>
<li>unnamed: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>unnamed: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>unnamed: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>p_forward_mux: (  )</li>
</ul><ul>
<li>p_wdata_buf: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><h2 id="instantiations">Instantiations</h2><ul>
<li>u_intg_err_out: prim_buf</li>
</ul><ul>
<li>u_lfsr: prim_lfsr</li>
</ul><ul>
<li>u_intg_err_macro_req: prim_buf</li>
</ul><ul>
<li>u_intg_err_data_scr: prim_buf</li>
</ul><ul>
<li>u_prim_ram_1p_adv: prim_ram_1p_adv</li>
</ul><br><br><br><br><br><br>