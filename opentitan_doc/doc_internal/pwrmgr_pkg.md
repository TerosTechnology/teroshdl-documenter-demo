# Package: pwrmgr_pkg

- **File**: pwrmgr_pkg.sv
## Description

 Copyright lowRISC contributors.
 Licensed under the Apache License, Version 2.0, see LICENSE for details.
 SPDX-License-Identifier: Apache-2.0

 Power Manager Package



## Constants

| Name                     | Type          | Value                        | Description                                                   |
| ------------------------ | ------------- | ---------------------------- | ------------------------------------------------------------- |
| ALWAYS_ON_DOMAIN         | int           | 0                            |                                                               |
| PowerDomains             | int           | 2                            |  this needs to be a topgen populated number, or from topcfg?  |
| TotalWakeWidth           | int           | pwrmgr_reg_pkg::NumWkups + 2 | Abort and fall through are added                              |
| pwr_ast_rsp_t            | pwr_ast_rsp_t | undefined                    |  default value of pwr_ast_rsp (for dangling ports)            |
| PWR_AST_RSP_SYNC_DEFAULT | pwr_ast_rsp_t |                              |                                                               |
| PWR_RST_RSP_DEFAULT      | pwr_rst_rsp_t |                              |  default value (for dangling ports)                           |
| pwr_otp_rsp_t            | pwr_otp_rsp_t | undefined                    |  default value (for dangling ports)                           |
| pwr_lc_rsp_t             | pwr_lc_rsp_t  | undefined                    |  default value (for dangling ports)                           |
| pwr_flash_t              | pwr_flash_t   | undefined                    |                                                               |
| pwr_cpu_t                | pwr_cpu_t     | undefined                    |  default value (for dangling ports)                           |
| WAKEUPS_DEFAULT          | int           | '0                           |  default value (for dangling ports)                           |
| RSTREQS_DEFAULT          | int           | '0                           |                                                               |
## Types

| Name             | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Description                                                                                                                                                                      |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| pwr_ast_req_t    | struct packed {<br><span style="padding-left:20px">     logic main_pd_n;<br><span style="padding-left:20px">     logic pwr_clamp_env;<br><span style="padding-left:20px">     logic pwr_clamp;<br><span style="padding-left:20px">     logic slow_clk_en;<br><span style="padding-left:20px">     logic core_clk_en;<br><span style="padding-left:20px">     logic io_clk_en;<br><span style="padding-left:20px">     logic usb_clk_en;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | // The following structs should eventually be relocated to other modules. typedef enum logic [1:0] {   DiffValid = 2'b10,   DiffInvalid = 2'b01 } pwrmgr_diff_e;  pwrmgr to ast  |
| pwr_ast_rsp_t    | struct packed {<br><span style="padding-left:20px">     logic slow_clk_val;<br><span style="padding-left:20px">     logic core_clk_val;<br><span style="padding-left:20px">     logic io_clk_val;<br><span style="padding-left:20px">     logic usb_clk_val;<br><span style="padding-left:20px">     logic main_pok;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                  |
| pwr_rst_req_t    | struct packed {<br><span style="padding-left:20px">     logic [PowerDomains-1:0] rst_lc_req;<br><span style="padding-left:20px">     logic [PowerDomains-1:0] rst_sys_req;<br><span style="padding-left:20px">     logic [pwrmgr_reg_pkg::NumRstReqs:0] rstreqs;<br><span style="padding-left:20px">     reset_cause_e reset_cause;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |  pwrmgr to rstmgr                                                                                                                                                                |
| pwr_rst_rsp_t    | struct packed {<br><span style="padding-left:20px">     logic [PowerDomains-1:0] rst_lc_src_n;<br><span style="padding-left:20px">     logic [PowerDomains-1:0] rst_sys_src_n;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |  rstmgr to pwrmgr                                                                                                                                                                |
| pwr_clk_rsp_t    | struct packed {<br><span style="padding-left:20px">     logic clk_status;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  clkmgr to pwrmgr                                                                                                                                                                |
| pwr_otp_req_t    | struct packed {<br><span style="padding-left:20px">     logic otp_init;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |  pwrmgr to otp                                                                                                                                                                   |
| pwr_otp_rsp_t    | struct packed {<br><span style="padding-left:20px">     logic otp_done;<br><span style="padding-left:20px">     logic otp_idle;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |  otp to pwrmgr                                                                                                                                                                   |
| pwr_lc_req_t     | struct packed {<br><span style="padding-left:20px">     logic lc_init;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |  pwrmgr to lifecycle                                                                                                                                                             |
| pwr_lc_rsp_t     | struct packed {<br><span style="padding-left:20px">     logic lc_done;<br><span style="padding-left:20px">     logic lc_idle;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |  lifecycle to pwrmgr                                                                                                                                                             |
| pwr_flash_t      | struct packed {<br><span style="padding-left:20px">     logic flash_idle;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                  |
| pwr_cpu_t        | struct packed {<br><span style="padding-left:20px">     logic core_sleeping;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |  processor to pwrmgr                                                                                                                                                             |
| pwr_peri_t       | struct packed {<br><span style="padding-left:20px">     logic [pwrmgr_reg_pkg::NumWkups-1:0] wakeups;<br><span style="padding-left:20px">          logic [pwrmgr_reg_pkg::NumRstReqs:0] rstreqs;<br><span style="padding-left:20px">   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |  peripherals to pwrmgr                                                                                                                                                           |
| pwrup_cause_e    | enum logic [1:0] {<br><span style="padding-left:20px">     Por   = 2'h0,<br><span style="padding-left:20px">     Wake  = 2'h1,<br><span style="padding-left:20px">     Reset = 2'h2   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |  power-up causes                                                                                                                                                                 |
| low_power_hint_e | enum logic {<br><span style="padding-left:20px">     None     = 1'b0,<br><span style="padding-left:20px">     LowPower = 1'b1   }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  low power hints                                                                                                                                                                 |
| fast_pwr_state_e | enum logic [4:0] {<br><span style="padding-left:20px">     FastPwrStateLowPower,<br><span style="padding-left:20px">     FastPwrStateEnableClocks,<br><span style="padding-left:20px">     FastPwrStateReleaseLcRst,<br><span style="padding-left:20px">     FastPwrStateOtpInit,<br><span style="padding-left:20px">     FastPwrStateLcInit,<br><span style="padding-left:20px">     FastPwrStateStrap,<br><span style="padding-left:20px">     FastPwrStateAckPwrUp,<br><span style="padding-left:20px">     FastPwrStateRomCheck,<br><span style="padding-left:20px">     FastPwrStateActive,<br><span style="padding-left:20px">     FastPwrStateDisClks,<br><span style="padding-left:20px">     FastPwrStateFallThrough,<br><span style="padding-left:20px">     FastPwrStateNvmIdleChk,<br><span style="padding-left:20px">     FastPwrStateLowPowerPrep,<br><span style="padding-left:20px">     FastPwrStateNvmShutDown,<br><span style="padding-left:20px">     FastPwrStateResetPrep,<br><span style="padding-left:20px">     FastPwrStateReqPwrDn   } |  fast fsm state enum                                                                                                                                                             |
| slow_pwr_state_e | enum logic [3:0] {<br><span style="padding-left:20px">     SlowPwrStateReset,<br><span style="padding-left:20px">     SlowPwrStateLowPower,<br><span style="padding-left:20px">     SlowPwrStateMainPowerOn,<br><span style="padding-left:20px">     SlowPwrStatePwrClampOff,<br><span style="padding-left:20px">     SlowPwrStateClocksOn,<br><span style="padding-left:20px">     SlowPwrStateReqPwrUp,<br><span style="padding-left:20px">     SlowPwrStateIdle,<br><span style="padding-left:20px">     SlowPwrStateAckPwrDn,<br><span style="padding-left:20px">     SlowPwrStateClocksOff,<br><span style="padding-left:20px">     SlowPwrStatePwrClampOn,<br><span style="padding-left:20px">     SlowPwrStateMainPowerOff   }                                                                                                                                                                                                                                                                                                                             |  slow fsm state enum                                                                                                                                                             |
