
<style>
  table {
    width:70%;
    margin-left: auto;
    margin-right: auto
  }
  svg {
    display:block;  
    width:60%;
    height:40%;
    margin-left: auto;
    margin-right: auto
  }
  h1, h2, h3 {
    margin-left:1.5%;
    width:98%;
    font-weight:bold
  }
  code {
    color:#545253;
  }
  p {
    width: 98%;
    color:black;
    margin-top:5px;
    margin-bottom:5px 
  }
  * {
    color:black;
    line-height: 1.6;
  }
  li{
    margin: 20px 0;
  }
  #function_return{
    font-weight: bold;
    color:green;
  }
  #teroshdl_description, li {
    width: 98%;
    margin-left:2%;
    margin-right:2%;
  }
  #function_arguments{
    color:blue;
  }
  div.templateTerosHDL {
    background-color: white;
    position:absolute;
  }
  td, th {
    padding:7px; 
    border: 1px solid grey;
  }
  th {
    background-color: #ffd78c;
  }
  tr:hover {
    background-color: #ddd;
  }
  tr:nth-child(even){
    background-color: #f2f2f2;
  }
</style>
<div id="teroshdl" class='templateTerosHDL'>
<a id=tlul_socket_1n><h1 id="entity-tlul_socket_1n">Entity: tlul_socket_1n</h1></a><h2 id="diagram">Diagram</h2><p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 455 330"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="135,0 150,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="260" height="210" fill="black" x="150" y="0"></rect><rect id="SvgjsRect1007" width="256" height="205" fill="#bdecb6" x="152" y="2"></rect><text id="SvgjsText1008" font-family="Helvetica" x="130" y="-5.698437500000001" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   int unsigned </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="165" y="-5.698437500000001" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   N </tspan></text><line id="SvgjsLine1012" x1="135" y1="15" x2="150" y2="15" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="130" y="14.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="165" y="14.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   HReqPass </tspan></text><line id="SvgjsLine1017" x1="135" y1="35" x2="150" y2="35" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1018" font-family="Helvetica" x="130" y="34.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1019" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit </tspan></text><text id="SvgjsText1020" font-family="Helvetica" x="165" y="34.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   HRspPass </tspan></text><line id="SvgjsLine1022" x1="135" y1="55" x2="150" y2="55" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1023" font-family="Helvetica" x="130" y="54.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1024" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [N-1:0] </tspan></text><text id="SvgjsText1025" font-family="Helvetica" x="165" y="54.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   N </tspan></text><line id="SvgjsLine1027" x1="135" y1="75" x2="150" y2="75" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1028" font-family="Helvetica" x="130" y="74.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1029" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [N-1:0] </tspan></text><text id="SvgjsText1030" font-family="Helvetica" x="165" y="74.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   N </tspan></text><line id="SvgjsLine1032" x1="135" y1="95" x2="150" y2="95" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1033" font-family="Helvetica" x="130" y="94.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1034" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [3:0] </tspan></text><text id="SvgjsText1035" font-family="Helvetica" x="165" y="94.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   HReqDepth </tspan></text><line id="SvgjsLine1037" x1="135" y1="115" x2="150" y2="115" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1038" font-family="Helvetica" x="130" y="114.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1039" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [3:0] </tspan></text><text id="SvgjsText1040" font-family="Helvetica" x="165" y="114.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   HRspDepth </tspan></text><line id="SvgjsLine1042" x1="135" y1="135" x2="150" y2="135" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1043" font-family="Helvetica" x="130" y="134.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1044" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [N*4-1:0] </tspan></text><text id="SvgjsText1045" font-family="Helvetica" x="165" y="134.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   N </tspan></text><line id="SvgjsLine1047" x1="135" y1="155" x2="150" y2="155" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1048" font-family="Helvetica" x="130" y="154.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1049" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   bit [N*4-1:0] </tspan></text><text id="SvgjsText1050" font-family="Helvetica" x="165" y="154.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   N </tspan></text><line id="SvgjsLine1052" x1="135" y1="175" x2="150" y2="175" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1053" font-family="Helvetica" x="130" y="174.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1054" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   int unsigned </tspan></text><text id="SvgjsText1055" font-family="Helvetica" x="165" y="174.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   NWD </tspan></text><line id="SvgjsLine1057" x1="135" y1="195" x2="150" y2="195" stroke-linecap="rec" stroke="black" stroke-width="5"></line><rect id="SvgjsRect1058" width="260" height="110" fill="black" x="150" y="215"></rect><rect id="SvgjsRect1059" width="256" height="105" fill="#fdfd96" x="152" y="217"></rect><text id="SvgjsText1060" font-family="Helvetica" x="130" y="209.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1061" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1062" font-family="Helvetica" x="165" y="209.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1063" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   clk_i </tspan></text><line id="SvgjsLine1064" x1="135" y1="230" x2="150" y2="230" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1065" font-family="Helvetica" x="130" y="229.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1066" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1067" font-family="Helvetica" x="165" y="229.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1068" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   rst_ni </tspan></text><line id="SvgjsLine1069" x1="135" y1="250" x2="150" y2="250" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1070" font-family="Helvetica" x="130" y="249.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1071" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1072" font-family="Helvetica" x="165" y="249.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1073" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   tl_h_i </tspan></text><line id="SvgjsLine1074" x1="135" y1="270" x2="150" y2="270" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1075" font-family="Helvetica" x="130" y="269.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1076" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1077" font-family="Helvetica" x="165" y="269.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1078" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   tl_d_i </tspan></text><line id="SvgjsLine1079" x1="135" y1="290" x2="150" y2="290" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1080" font-family="Helvetica" x="130" y="289.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1081" dy="26" x="130" svgjs:data="{&quot;newLined&quot;:true}">   [NWD-1:0] </tspan></text><text id="SvgjsText1082" font-family="Helvetica" x="165" y="289.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1083" dy="26" x="165" svgjs:data="{&quot;newLined&quot;:true}">   dev_select_i </tspan></text><line id="SvgjsLine1084" x1="135" y1="310" x2="150" y2="310" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1085" font-family="Helvetica" x="430" y="209.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1086" dy="26" x="430" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1087" font-family="Helvetica" x="395" y="209.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1088" dy="26" x="395" svgjs:data="{&quot;newLined&quot;:true}">   tl_h_o </tspan></text><line id="SvgjsLine1089" x1="410" y1="230" x2="425" y2="230" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1090" font-family="Helvetica" x="430" y="229.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1091" dy="26" x="430" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1092" font-family="Helvetica" x="395" y="229.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1093" dy="26" x="395" svgjs:data="{&quot;newLined&quot;:true}">   tl_d_o </tspan></text><line id="SvgjsLine1094" x1="410" y1="250" x2="425" y2="250" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg></p><h2 id="description">Description</h2><div id="teroshdl_description"><p>Copyright lowRISC contributors. Licensed under the Apache License, Version 2.0, see LICENSE for details. SPDX-License-Identifier: Apache-2.0 TL-UL socket 1:N module configuration settings device_count: 4 Verilog parameters HReqPass:      if 1 then host requests can pass through on empty fifo, default 1 HRspPass:      if 1 then host responses can pass through on empty fifo, default 1 DReqPass:      (one per device_count) if 1 then device i requests can pass through on empty fifo, default 1 DRspPass:      (one per device_count) if 1 then device i responses can pass through on empty fifo, default 1 HReqDepth:     Depth of host request FIFO, default 2 HRspDepth:     Depth of host response FIFO, default 2 DReqDepth:     (one per device_count) Depth of device i request FIFO, default 2 DRspDepth:     (one per device_count) Depth of device i response FIFO, default 2 Requests must stall to one device until all responses from other devices have returned.  Need to keep a counter of all outstanding requests and wait until that counter is zero before switching devices. This module will return a request error if the input value of 'dev_select_i' is not within the range 0..N-1. Thus the instantiator of the socket can indicate error by any illegal value of dev_select_i. 4'b1111 is recommended for visibility The maximum value of N is 15</p></div><h2 id="generics">Generics</h2>
<table>
<thead>
<tr>
<th id="generic_name">Generic name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>N</td>
<td>int unsigned</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>HReqPass</td>
<td>bit</td>
<td>1'b1</td>
<td></td>
</tr>
<tr>
<td>HRspPass</td>
<td>bit</td>
<td>1'b1</td>
<td></td>
</tr>
<tr>
<td>N</td>
<td>bit [N-1:0]</td>
<td>undefined</td>
<td></td>
</tr>
<tr>
<td>N</td>
<td>bit [N-1:0]</td>
<td>undefined</td>
<td></td>
</tr>
<tr>
<td>HReqDepth</td>
<td>bit [3:0]</td>
<td>4'h2</td>
<td></td>
</tr>
<tr>
<td>HRspDepth</td>
<td>bit [3:0]</td>
<td>4'h2</td>
<td></td>
</tr>
<tr>
<td>N</td>
<td>bit [N*4-1:0]</td>
<td>undefined</td>
<td></td>
</tr>
<tr>
<td>N</td>
<td>bit [N*4-1:0]</td>
<td>undefined</td>
<td></td>
</tr>
<tr>
<td>NWD</td>
<td>int unsigned</td>
<td>$clog2(N+1)</td>
<td>derived parameter</td>
</tr>
</tbody>
</table>
<h2 id="ports">Ports</h2>
<table>
<thead>
<tr>
<th id="port_name">Port name</th>
<th id="direction">Direction</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>clk_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>rst_ni</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tl_h_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tl_h_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tl_d_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tl_d_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>dev_select_i</td>
<td>input</td>
<td>[NWD-1:0]</td>
<td></td>
</tr>
</tbody>
</table><h2 id="signals">Signals</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dev_select_t</td>
<td>logic [NWD-1:0]</td>
<td>Since our steering is done after potential FIFOing, we need to shove our device select bits into spare bits of reqfifo instantiate the host fifo, create intermediate bus 't' FIFO'd version of device select</td>
</tr>
<tr>
<td>tl_t_o</td>
<td>tlul_pkg::tl_h2d_t</td>
<td></td>
</tr>
<tr>
<td>tl_t_i</td>
<td>tlul_pkg::tl_d2h_t</td>
<td></td>
</tr>
<tr>
<td>num_req_outstanding</td>
<td>logic [OutstandingW-1:0]</td>
<td></td>
</tr>
<tr>
<td>dev_select_outstanding</td>
<td>logic [NWD-1:0]</td>
<td></td>
</tr>
<tr>
<td>hold_all_requests</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>accept_t_req</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>accept_t_rsp</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>tl_u_o</td>
<td>tlul_pkg::tl_h2d_t</td>
<td>Make N copies of 't' request side with modified reqvalid, call them 'u[0]' .. 'u[n-1]'.</td>
</tr>
<tr>
<td>tl_u_i</td>
<td>tlul_pkg::tl_d2h_t</td>
<td></td>
</tr>
<tr>
<td>tl_t_p</td>
<td>tlul_pkg::tl_d2h_t</td>
<td></td>
</tr>
<tr>
<td>hfifo_reqready</td>
<td>logic</td>
<td>for the returning reqready, only look at the device we're addressing</td>
</tr>
</tbody>
</table>
<h2 id="constants">Constants</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NWD</td>
<td>int unsigned</td>
<td>$clog2(N+1)</td>
<td>derived parameter</td>
</tr>
<tr>
<td>MaxOutstanding</td>
<td>int</td>
<td>2**top_pkg::TL_AIW</td>
<td>Up to 256 ounstanding</td>
</tr>
<tr>
<td>OutstandingW</td>
<td>int</td>
<td>$clog2(MaxOutstanding+1)</td>
<td></td>
</tr>
</tbody>
</table><h2 id="processes">Processes</h2>
<ul>
<li><p>unnamed: <em>( @(posedge clk_i or negedge rst_ni) )</em></p></li>
<li><p>unnamed: <em>(  )</em></p></li>
<li><p>unnamed: <em>(  )</em></p></li>
</ul><h2 id="instantiations">Instantiations</h2>
<ul>
<li>fifo_h: tlul_fifo_sync</li>
<li>err_resp: tlul_err_resp</li>
</ul><br><br><br><br><br><br>