
<style>
  table {
    width:70%;
    margin-left: auto;
    margin-right: auto
  }
  svg {
    display:block;  
    width:60%;
    margin-left: auto;
    margin-right: auto
  }
  h1, h2, h3 {
    margin-left:1.5%;
    width:98%;
    font-weight:bold
  }
  code {
    color:#545253;
  }
  p {
    width: 98%;
    color:black;
    margin-top:5px;
    margin-bottom:5px 
  }
  * {
    color:black;
    line-height: 1.6;
  }
  li{
    margin: 20px 0;
  }
  #function_return{
    font-weight: bold;
    color:green;
  }
  #teroshdl_description, li {
    width: 95%;
    margin-left:2%;
    margin-right:2%;
  }
  #function_arguments{
    color:black;
  }
  #descriptions{
    width: 90%;
    margin-left:5.5%;
    margin-right:3%;
  }
  div.templateTerosHDL {
    background-color: white;
    position:absolute;
  }
  td, th {
    padding:2px; 
    border: 1px solid grey;
  }
  th {
    background-color: #ffd78c;
  }
  tr:hover {
    background-color: #ddd;
  }
  tr:nth-child(even){
    background-color: #f2f2f2;
  }
</style>
<div id="teroshdl" class='templateTerosHDL'>
<a id=usb_fs_rx><h1 id="entity-usb_fs_rx">Entity: usb_fs_rx</h1></a><h2 id="diagram">Diagram</h2><p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 615 310"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="45,0 60,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="450" height="290" fill="black" x="60" y="15"></rect><rect id="SvgjsRect1007" width="446" height="285" fill="#fdfd96" x="62" y="17"></rect><text id="SvgjsText1008" font-family="Helvetica" x="40" y="9.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="75" y="9.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   clk_i </tspan></text><line id="SvgjsLine1012" x1="45" y1="30" x2="60" y2="30" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="40" y="29.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="75" y="29.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   rst_ni </tspan></text><line id="SvgjsLine1017" x1="45" y1="50" x2="60" y2="50" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1018" font-family="Helvetica" x="40" y="49.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1019" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1020" font-family="Helvetica" x="75" y="49.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   link_reset_i </tspan></text><line id="SvgjsLine1022" x1="45" y1="70" x2="60" y2="70" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1023" font-family="Helvetica" x="40" y="69.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1024" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1025" font-family="Helvetica" x="75" y="69.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   cfg_eop_single_bit_i </tspan></text><line id="SvgjsLine1027" x1="45" y1="90" x2="60" y2="90" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1028" font-family="Helvetica" x="40" y="89.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1029" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1030" font-family="Helvetica" x="75" y="89.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   cfg_rx_differential_i </tspan></text><line id="SvgjsLine1032" x1="45" y1="110" x2="60" y2="110" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1033" font-family="Helvetica" x="40" y="109.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1034" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1035" font-family="Helvetica" x="75" y="109.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   usb_d_i </tspan></text><line id="SvgjsLine1037" x1="45" y1="130" x2="60" y2="130" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1038" font-family="Helvetica" x="40" y="129.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1039" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1040" font-family="Helvetica" x="75" y="129.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   usb_dp_i </tspan></text><line id="SvgjsLine1042" x1="45" y1="150" x2="60" y2="150" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1043" font-family="Helvetica" x="40" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1044" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1045" font-family="Helvetica" x="75" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   usb_dn_i </tspan></text><line id="SvgjsLine1047" x1="45" y1="170" x2="60" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1048" font-family="Helvetica" x="40" y="169.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1049" dy="26" x="40" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1050" font-family="Helvetica" x="75" y="169.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="75" svgjs:data="{&quot;newLined&quot;:true}">   tx_en_i </tspan></text><line id="SvgjsLine1052" x1="45" y1="190" x2="60" y2="190" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1053" font-family="Helvetica" x="530" y="9.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1054" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1055" font-family="Helvetica" x="495" y="9.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   bit_strobe_o </tspan></text><line id="SvgjsLine1057" x1="510" y1="30" x2="525" y2="30" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1058" font-family="Helvetica" x="530" y="29.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1059" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1060" font-family="Helvetica" x="495" y="29.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1061" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   pkt_start_o </tspan></text><line id="SvgjsLine1062" x1="510" y1="50" x2="525" y2="50" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1063" font-family="Helvetica" x="530" y="49.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1064" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1065" font-family="Helvetica" x="495" y="49.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1066" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   pkt_end_o </tspan></text><line id="SvgjsLine1067" x1="510" y1="70" x2="525" y2="70" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1068" font-family="Helvetica" x="530" y="69.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1069" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">   [3:0] </tspan></text><text id="SvgjsText1070" font-family="Helvetica" x="495" y="69.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1071" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   pid_o </tspan></text><line id="SvgjsLine1072" x1="510" y1="90" x2="525" y2="90" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1073" font-family="Helvetica" x="530" y="89.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1074" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">   [6:0] </tspan></text><text id="SvgjsText1075" font-family="Helvetica" x="495" y="89.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1076" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   addr_o </tspan></text><line id="SvgjsLine1077" x1="510" y1="110" x2="525" y2="110" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1078" font-family="Helvetica" x="530" y="109.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1079" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">   [3:0] </tspan></text><text id="SvgjsText1080" font-family="Helvetica" x="495" y="109.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1081" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   endp_o </tspan></text><line id="SvgjsLine1082" x1="510" y1="130" x2="525" y2="130" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1083" font-family="Helvetica" x="530" y="129.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1084" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">   [10:0] </tspan></text><text id="SvgjsText1085" font-family="Helvetica" x="495" y="129.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1086" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   frame_num_o </tspan></text><line id="SvgjsLine1087" x1="510" y1="150" x2="525" y2="150" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1088" font-family="Helvetica" x="530" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1089" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1090" font-family="Helvetica" x="495" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1091" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   rx_data_put_o </tspan></text><line id="SvgjsLine1092" x1="510" y1="170" x2="525" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1093" font-family="Helvetica" x="530" y="169.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1094" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">   [7:0] </tspan></text><text id="SvgjsText1095" font-family="Helvetica" x="495" y="169.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1096" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   rx_data_o </tspan></text><line id="SvgjsLine1097" x1="510" y1="190" x2="525" y2="190" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1098" font-family="Helvetica" x="530" y="189.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1099" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1100" font-family="Helvetica" x="495" y="189.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1101" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   valid_packet_o </tspan></text><line id="SvgjsLine1102" x1="510" y1="210" x2="525" y2="210" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1103" font-family="Helvetica" x="530" y="209.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1104" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1105" font-family="Helvetica" x="495" y="209.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1106" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   rx_jjj_det_o </tspan></text><line id="SvgjsLine1107" x1="510" y1="230" x2="525" y2="230" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1108" font-family="Helvetica" x="530" y="229.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1109" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1110" font-family="Helvetica" x="495" y="229.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1111" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   crc_error_o </tspan></text><line id="SvgjsLine1112" x1="510" y1="250" x2="525" y2="250" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1113" font-family="Helvetica" x="530" y="249.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1114" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1115" font-family="Helvetica" x="495" y="249.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1116" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   pid_error_o </tspan></text><line id="SvgjsLine1117" x1="510" y1="270" x2="525" y2="270" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1118" font-family="Helvetica" x="530" y="269.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1119" dy="26" x="530" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1120" font-family="Helvetica" x="495" y="269.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1121" dy="26" x="495" svgjs:data="{&quot;newLined&quot;:true}">   bitstuff_error_o </tspan></text><line id="SvgjsLine1122" x1="510" y1="290" x2="525" y2="290" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg></p><h2 id="description">Description</h2><div id="teroshdl_description"><p>Copyright lowRISC contributors. Copyright ETH Zurich. Copyright Luke Valenty (TinyFPGA project, <a href="https://github.com/tinyfpga/TinyFPGA-Bootloader)">https://github.com/tinyfpga/TinyFPGA-Bootloader)</a>. Licensed under the Apache License, Version 2.0, see LICENSE for details. SPDX-License-Identifier: Apache-2.0</p></div><h2 id="ports">Ports</h2>
<table>
<thead>
<tr>
<th id="port_name">Port name</th>
<th id="direction">Direction</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>clk_i</td>
<td>input</td>
<td></td>
<td>A 48MHz clock is required to recover the clock from the incoming data.</td>
</tr>
<tr>
<td>rst_ni</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_reset_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cfg_eop_single_bit_i</td>
<td>input</td>
<td></td>
<td>configuration</td>
</tr>
<tr>
<td>cfg_rx_differential_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>usb_d_i</td>
<td>input</td>
<td></td>
<td>USB data+ and data- lines (synchronous)</td>
</tr>
<tr>
<td>usb_dp_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>usb_dn_i</td>
<td>input</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tx_en_i</td>
<td>input</td>
<td></td>
<td>Transmit enable disables the receier</td>
</tr>
<tr>
<td>bit_strobe_o</td>
<td>output</td>
<td></td>
<td>pulse on every bit transition.</td>
</tr>
<tr>
<td>pkt_start_o</td>
<td>output</td>
<td></td>
<td>Pulse on beginning of new packet.</td>
</tr>
<tr>
<td>pkt_end_o</td>
<td>output</td>
<td></td>
<td>Pulse on end of current packet.</td>
</tr>
<tr>
<td>pid_o</td>
<td>output</td>
<td>[3:0]</td>
<td>Most recent packet decoded.</td>
</tr>
<tr>
<td>addr_o</td>
<td>output</td>
<td>[6:0]</td>
<td></td>
</tr>
<tr>
<td>endp_o</td>
<td>output</td>
<td>[3:0]</td>
<td></td>
</tr>
<tr>
<td>frame_num_o</td>
<td>output</td>
<td>[10:0]</td>
<td></td>
</tr>
<tr>
<td>rx_data_put_o</td>
<td>output</td>
<td></td>
<td>Pulse on valid data on rx_data.</td>
</tr>
<tr>
<td>rx_data_o</td>
<td>output</td>
<td>[7:0]</td>
<td></td>
</tr>
<tr>
<td>valid_packet_o</td>
<td>output</td>
<td></td>
<td>Most recent packet passes PID and CRC checks</td>
</tr>
<tr>
<td>rx_jjj_det_o</td>
<td>output</td>
<td></td>
<td>line status for the status detection (actual rx bits after clock recovery)</td>
</tr>
<tr>
<td>crc_error_o</td>
<td>output</td>
<td></td>
<td>Error detection</td>
</tr>
<tr>
<td>pid_error_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
<tr>
<td>bitstuff_error_o</td>
<td>output</td>
<td></td>
<td></td>
</tr>
</tbody>
</table><h2 id="signals">Signals</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bitstuff_history_q</td>
<td>logic [6:0]</td>
<td></td>
</tr>
<tr>
<td>bitstuff_history_d</td>
<td>logic [6:0]</td>
<td></td>
</tr>
<tr>
<td>bitstuff_error</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>bitstuff_error_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>bitstuff_error_d</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>line_state_qq</td>
<td>logic [2:0]</td>
<td>If the receive path is set not to use a differential reciever: There is a chance that one of the differential pairs will appear to have changed to the new state while the other is still in the old state.  the following state machine detects transitions and waits an extra sampling clock before decoding the state on the differential pair.  this transition period will only ever last for one clock as long as there is no noise on the line. if there is enough noise on the line then the data may be corrupted and the packet will fail the data integrity checks. If the receive path uses a differential receiver: The single ended signals must still be recovered to detect SE0 Note that the spec warns in section 7.1.4.1: Both D+ and D- may temporarily be less than VIH (min) during differential signal transitions. This period can be up to 14 ns (TFST) for full-speed transitions and up to 210 ns (TLST) for low-speed transitions. Logic in the receiver must ensure that that this is not interpreted as an SE0. Since the 48MHz sample clock is 20.833ns period we will either miss this or sample it only once, so it will be covered by line_state=DT and the next sample will not be SE0 unless this was a real SE0 transition Note: if it is a real SE0 the differential rx could be doing anything</td>
</tr>
<tr>
<td>line_state_q</td>
<td>logic [2:0]</td>
<td>If the receive path is set not to use a differential reciever: There is a chance that one of the differential pairs will appear to have changed to the new state while the other is still in the old state.  the following state machine detects transitions and waits an extra sampling clock before decoding the state on the differential pair.  this transition period will only ever last for one clock as long as there is no noise on the line. if there is enough noise on the line then the data may be corrupted and the packet will fail the data integrity checks. If the receive path uses a differential receiver: The single ended signals must still be recovered to detect SE0 Note that the spec warns in section 7.1.4.1: Both D+ and D- may temporarily be less than VIH (min) during differential signal transitions. This period can be up to 14 ns (TFST) for full-speed transitions and up to 210 ns (TLST) for low-speed transitions. Logic in the receiver must ensure that that this is not interpreted as an SE0. Since the 48MHz sample clock is 20.833ns period we will either miss this or sample it only once, so it will be covered by line_state=DT and the next sample will not be SE0 unless this was a real SE0 transition Note: if it is a real SE0 the differential rx could be doing anything</td>
</tr>
<tr>
<td>line_state_d</td>
<td>logic [2:0]</td>
<td>If the receive path is set not to use a differential reciever: There is a chance that one of the differential pairs will appear to have changed to the new state while the other is still in the old state.  the following state machine detects transitions and waits an extra sampling clock before decoding the state on the differential pair.  this transition period will only ever last for one clock as long as there is no noise on the line. if there is enough noise on the line then the data may be corrupted and the packet will fail the data integrity checks. If the receive path uses a differential receiver: The single ended signals must still be recovered to detect SE0 Note that the spec warns in section 7.1.4.1: Both D+ and D- may temporarily be less than VIH (min) during differential signal transitions. This period can be up to 14 ns (TFST) for full-speed transitions and up to 210 ns (TLST) for low-speed transitions. Logic in the receiver must ensure that that this is not interpreted as an SE0. Since the 48MHz sample clock is 20.833ns period we will either miss this or sample it only once, so it will be covered by line_state=DT and the next sample will not be SE0 unless this was a real SE0 transition Note: if it is a real SE0 the differential rx could be doing anything</td>
</tr>
<tr>
<td>diff_state_q</td>
<td>logic [2:0]</td>
<td></td>
</tr>
<tr>
<td>diff_state_d</td>
<td>logic [2:0]</td>
<td></td>
</tr>
<tr>
<td>line_state_rx</td>
<td>logic [2:0]</td>
<td></td>
</tr>
<tr>
<td>use_se</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>dpair</td>
<td>logic [1:0]</td>
<td>localparam logic [2:0] SE1 = 3'b011; // single-ended 1 - illegal Mute the input if we're transmitting</td>
</tr>
<tr>
<td>ddiff</td>
<td>logic [1:0]</td>
<td>localparam logic [2:0] SE1 = 3'b011; // single-ended 1 - illegal Mute the input if we're transmitting</td>
</tr>
<tr>
<td>bit_phase_q</td>
<td>logic [1:0]</td>
<td>the DT state from the line state recovery state machine is used to align to transmit clock.  the line state is sampled in the middle of the bit time. example of signal relationships ------------------------------- line_state        DT  DJ  DJ  DJ  DT  DK  DK  DK  DK  DK  DK  DT  DJ  DJ  DJ line_state_valid  <strong><em><strong></em></strong>----<strong><em><em>__</em></strong></em></strong>----<strong><em><strong><em>_</strong></em></strong>----<strong><em><strong></em></strong>----_</em></strong> bit_phase         0   0   1   2   3   0   1   2   3   0   1   2   0   1   2</td>
</tr>
<tr>
<td>bit_phase_d</td>
<td>logic [1:0]</td>
<td>the DT state from the line state recovery state machine is used to align to transmit clock.  the line state is sampled in the middle of the bit time. example of signal relationships ------------------------------- line_state        DT  DJ  DJ  DJ  DT  DK  DK  DK  DK  DK  DK  DT  DJ  DJ  DJ line_state_valid  <strong><em><strong></em></strong>----<strong><em><em>__</em></strong></em></strong>----<strong><em><strong><em>_</strong></em></strong>----<strong><em><strong></em></strong>----_</em></strong> bit_phase         0   0   1   2   3   0   1   2   3   0   1   2   0   1   2</td>
</tr>
<tr>
<td>line_state_valid</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>line_history_q</td>
<td>logic [11:0]</td>
<td>usb uses a sync to denote the beginning of a packet and two single-ended-0 to denote the end of a packet.  this state machine recognizes the beginning and end of packets for subsequent layers to process.</td>
</tr>
<tr>
<td>line_history_d</td>
<td>logic [11:0]</td>
<td>usb uses a sync to denote the beginning of a packet and two single-ended-0 to denote the end of a packet.  this state machine recognizes the beginning and end of packets for subsequent layers to process.</td>
</tr>
<tr>
<td>packet_valid_q</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>packet_valid_d</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>see_eop</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>packet_start</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>packet_end</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>dvalid_raw</td>
<td>logic</td>
<td>in order to ensure there are enough bit transitions for a receiver to recover the clock usb uses NRZI encoding. <a href="https://en.wikipedia.org/wiki/Non-return-to-zero">https://en.wikipedia.org/wiki/Non-return-to-zero</a></td>
</tr>
<tr>
<td>din</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>dvalid</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>full_pid_q</td>
<td>logic [8:0]</td>
<td>shift in the entire 8-bit pid with an additional 9th bit used as a sentinal.</td>
</tr>
<tr>
<td>full_pid_d</td>
<td>logic [8:0]</td>
<td>shift in the entire 8-bit pid with an additional 9th bit used as a sentinal.</td>
</tr>
<tr>
<td>pid_valid</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>pid_complete</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>crc5_q</td>
<td>logic [4:0]</td>
<td></td>
</tr>
<tr>
<td>crc5_d</td>
<td>logic [4:0]</td>
<td></td>
</tr>
<tr>
<td>crc5_valid</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>crc5_invert</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>crc16_q</td>
<td>logic [15:0]</td>
<td></td>
</tr>
<tr>
<td>crc16_d</td>
<td>logic [15:0]</td>
<td></td>
</tr>
<tr>
<td>crc16_valid</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>crc16_invert</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>pkt_is_token</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>pkt_is_data</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>pkt_is_handshake</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>token_payload_q</td>
<td>logic [11:0]</td>
<td></td>
</tr>
<tr>
<td>token_payload_d</td>
<td>logic [11:0]</td>
<td></td>
</tr>
<tr>
<td>token_payload_done</td>
<td>logic</td>
<td></td>
</tr>
<tr>
<td>addr_q</td>
<td>logic [6:0]</td>
<td></td>
</tr>
<tr>
<td>addr_d</td>
<td>logic [6:0]</td>
<td></td>
</tr>
<tr>
<td>endp_q</td>
<td>logic [3:0]</td>
<td></td>
</tr>
<tr>
<td>endp_d</td>
<td>logic [3:0]</td>
<td></td>
</tr>
<tr>
<td>frame_num_q</td>
<td>logic [10:0]</td>
<td></td>
</tr>
<tr>
<td>frame_num_d</td>
<td>logic [10:0]</td>
<td></td>
</tr>
<tr>
<td>rx_data_buffer_q</td>
<td>logic [8:0]</td>
<td></td>
</tr>
<tr>
<td>rx_data_buffer_d</td>
<td>logic [8:0]</td>
<td></td>
</tr>
<tr>
<td>rx_data_buffer_full</td>
<td>logic</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="constants">Constants</h2>
<table>
<thead>
<tr>
<th id="name">Name</th>
<th id="type">Type</th>
<th id="value">Value</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DT</td>
<td>logic [2:0]</td>
<td>3'b100</td>
<td>transition state</td>
</tr>
<tr>
<td>DJ</td>
<td>logic [2:0]</td>
<td>3'b010</td>
<td>J - idle line state</td>
</tr>
<tr>
<td>DK</td>
<td>logic [2:0]</td>
<td>3'b001</td>
<td>K - inverse of J</td>
</tr>
<tr>
<td>SE0</td>
<td>logic [2:0]</td>
<td>3'b000</td>
<td>single-ended 0 - end of packet or detached</td>
</tr>
</tbody>
</table><h2 id="processes">Processes</h2><ul>
<li>proc_dpair_mute: (  )</li>
</ul><ul>
<li>proc_line_state_q: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>proc_line_state_d: (  )</li>
</ul><ul>
<li>proc_diff_state_d: (  )</li>
</ul><ul>
<li>proc_bit_phase_q: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>proc_packet_valid_d: (  )</li>
</ul><ul>
<li>proc_reg_pkt_line: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>proc_bitstuff_history_d: (  )</li>
</ul><ul>
<li>proc_bitstuff_history_q: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>proc_bistuff_error_d: (  )</li>
</ul><div id="descriptions"><p><strong>Description</strong><br />
remember the bitstuff errors</p></div><ul>
<li>proc_bitstuff_error_q: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><ul>
<li>proc_full_pid_d: (  )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>unnamed: (  )</li>
</ul><ul>
<li>proc_gp_regs: ( @(posedge clk_i or negedge rst_ni) )</li>
</ul><br><br><br><br><br><br>